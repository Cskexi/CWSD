{"ast":null,"code":"import { save, deleteByIds } from \"@/api/modules/monitor\";\nimport { dictypeList } from \"@/api/modules/dictype\";\nimport { dicPage } from \"@/api/modules/dic\";\nexport default {\n  name: \"addOrEdit\",\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: \"新增\"\n    },\n    defaultFormDate: {\n      type: Object\n    }\n  },\n  data() {\n    return {\n      t: 0,\n      flag: false,\n      form: {\n        id: '',\n        name: '',\n        address: '',\n        streamUrl: ''\n      },\n      options: [],\n      //value,lable\n      searchForm: {\n        pageNum: 1,\n        pageSize: 10,\n        dictypeId: \"\"\n      }\n    };\n  },\n  mounted() {\n    this.loadOptions();\n    if (JSON.stringify(this.defaultFormDate) == \"{}\") {\n      this.flag = false;\n    } else {\n      this.form = JSON.parse(JSON.stringify(this.defaultFormDate));\n      this.flag = true;\n    }\n    console.log(this.flag);\n  },\n  methods: {\n    deleteMonitor(ids) {\n      deleteByIds({\n        ids: ids\n      }).then(result => {\n        this.$emit(\"close\", this.flag);\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    loadOptions() {\n      dictypeList({\n        name: \"地区\"\n      }).then(result => {\n        this.searchForm.dictypeId = result.data[0].id;\n        dicPage({\n          ...this.searchForm\n        }).then(result => {\n          console.log(result.data.records);\n          this.options = result.data.records;\n\n          // this.total = result.data.total;\n          // this.tableData = result.data.records;\n          //this.total = result.data.total\n        }).catch(err => {\n          console.log(\"error:\" + err);\n        });\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    close() {\n      this.flag = false;\n      this.$emit(\"close\", this.flag);\n    },\n    submit() {\n      if (this.form.name == \"\" || this.form.address == \"\" || this.form.streamUrl == \"\") {\n        this.$message.error(\"请填写相关内容\");\n      } else {\n        save({\n          ...this.form\n        }).then(res => {\n          this.flag = true;\n          this.$message.success(\"成功\" + this.title);\n          this.$emit(\"close\", this.flag);\n        }).catch(err => {\n          this.flag = false;\n          this.$emit(\"close\", this.flag);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["save","deleteByIds","dictypeList","dicPage","name","props","visible","type","Boolean","default","title","String","defaultFormDate","Object","data","t","flag","form","id","address","streamUrl","options","searchForm","pageNum","pageSize","dictypeId","mounted","loadOptions","JSON","stringify","parse","console","log","methods","deleteMonitor","ids","then","result","$emit","catch","err","records","close","submit","$message","error","res","success"],"sources":["src/views/monitor/components/AddOrEdit.vue"],"sourcesContent":["<template>\r\n  <el-dialog :title=\"title\" :visible=\"visible\" :before-close=\"close\" append-to-body>\r\n    <el-form :model=\"form\" ref=\"form\">\r\n      <el-form-item label=\"名字\" prop=\"name\">\r\n        <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"地区\" prop=\"sex\">\r\n        <el-select v-model=\"form.address\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.name\" :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"视频地址\" prop=\"streamUrl\">\r\n        <el-input v-model=\"form.streamUrl\" autocomplete=\"off\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n\r\n      <el-button type=\"danger\" @click=\"deleteMonitor(form.id)\" v-if=\"this.flag === true\">删除</el-button>\r\n      <el-button @click=\"close\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>    \r\n\r\n<script>\r\nimport { save, deleteByIds } from \"@/api/modules/monitor\"\r\nimport { dictypeList } from \"@/api/modules/dictype\"\r\nimport { dicPage } from \"@/api/modules/dic\"\r\n\r\n\r\nexport default {\r\n  name: \"addOrEdit\",\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"新增\"\r\n    },\r\n    defaultFormDate: {\r\n      type: Object,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      t: 0,\r\n      flag: false,\r\n      form: {\r\n        id: '',\r\n        name: '',\r\n        address: '',\r\n        streamUrl: '',\r\n      },\r\n      options: [],//value,lable\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        dictypeId: \"\",\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.loadOptions();\r\n    if (JSON.stringify(this.defaultFormDate) == \"{}\") {\r\n      this.flag = false\r\n    } else {\r\n      this.form = JSON.parse(JSON.stringify(this.defaultFormDate))\r\n      this.flag = true;\r\n    }\r\n    console.log(this.flag)\r\n\r\n  },\r\n  methods: {\r\n    deleteMonitor(ids) {\r\n      deleteByIds({ ids: ids }).then(result => {\r\n        this.$emit(\"close\", this.flag)\r\n      }).catch(err => {\r\n        console.log(\"error:\" + err)\r\n      })\r\n    },\r\n\r\n    loadOptions() {\r\n      dictypeList({ name: \"地区\" }).then(result => {\r\n        this.searchForm.dictypeId = result.data[0].id;\r\n        dicPage({\r\n          ...this.searchForm\r\n        }).then(result => {\r\n          console.log(result.data.records)\r\n          this.options = result.data.records;\r\n\r\n          // this.total = result.data.total;\r\n          // this.tableData = result.data.records;\r\n          //this.total = result.data.total\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n\r\n      }).catch(err => {\r\n        console.log(\"error:\" + err)\r\n      })\r\n\r\n\r\n    },\r\n    close() {\r\n      this.flag = false;\r\n      this.$emit(\"close\", this.flag)\r\n    },\r\n    submit() {\r\n      if (this.form.name == \"\" || this.form.address == \"\" || this.form.streamUrl == \"\") {\r\n        this.$message.error(\"请填写相关内容\")\r\n      } else {\r\n        save({ ...this.form }).then(res => {\r\n          this.flag = true\r\n          this.$message.success(\"成功\" + this.title)\r\n          this.$emit(\"close\", this.flag)\r\n        })\r\n          .catch(err => {\r\n            this.flag = false\r\n            this.$emit(\"close\", this.flag)\r\n          })\r\n      }\r\n    }\r\n\r\n  }\r\n};\r\n</script>"],"mappings":"AA0BA,SAAAA,IAAA,EAAAC,WAAA;AACA,SAAAC,WAAA;AACA,SAAAC,OAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA;IACA;IACAG,eAAA;MACAL,IAAA,EAAAM;IACA;EACA;EACAC,KAAA;IACA;MACAC,CAAA;MACAC,IAAA;MACAC,IAAA;QACAC,EAAA;QACAd,IAAA;QACAe,OAAA;QACAC,SAAA;MACA;MACAC,OAAA;MAAA;MACAC,UAAA;QACAC,OAAA;QACAC,QAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,WAAA;IACA,IAAAC,IAAA,CAAAC,SAAA,MAAAjB,eAAA;MACA,KAAAI,IAAA;IACA;MACA,KAAAC,IAAA,GAAAW,IAAA,CAAAE,KAAA,CAAAF,IAAA,CAAAC,SAAA,MAAAjB,eAAA;MACA,KAAAI,IAAA;IACA;IACAe,OAAA,CAAAC,GAAA,MAAAhB,IAAA;EAEA;EACAiB,OAAA;IACAC,cAAAC,GAAA;MACAlC,WAAA;QAAAkC,GAAA,EAAAA;MAAA,GAAAC,IAAA,CAAAC,MAAA;QACA,KAAAC,KAAA,eAAAtB,IAAA;MACA,GAAAuB,KAAA,CAAAC,GAAA;QACAT,OAAA,CAAAC,GAAA,YAAAQ,GAAA;MACA;IACA;IAEAb,YAAA;MACAzB,WAAA;QAAAE,IAAA;MAAA,GAAAgC,IAAA,CAAAC,MAAA;QACA,KAAAf,UAAA,CAAAG,SAAA,GAAAY,MAAA,CAAAvB,IAAA,IAAAI,EAAA;QACAf,OAAA;UACA,QAAAmB;QACA,GAAAc,IAAA,CAAAC,MAAA;UACAN,OAAA,CAAAC,GAAA,CAAAK,MAAA,CAAAvB,IAAA,CAAA2B,OAAA;UACA,KAAApB,OAAA,GAAAgB,MAAA,CAAAvB,IAAA,CAAA2B,OAAA;;UAEA;UACA;UACA;QACA,GAAAF,KAAA,CAAAC,GAAA;UACAT,OAAA,CAAAC,GAAA,YAAAQ,GAAA;QACA;MAEA,GAAAD,KAAA,CAAAC,GAAA;QACAT,OAAA,CAAAC,GAAA,YAAAQ,GAAA;MACA;IAGA;IACAE,MAAA;MACA,KAAA1B,IAAA;MACA,KAAAsB,KAAA,eAAAtB,IAAA;IACA;IACA2B,OAAA;MACA,SAAA1B,IAAA,CAAAb,IAAA,eAAAa,IAAA,CAAAE,OAAA,eAAAF,IAAA,CAAAG,SAAA;QACA,KAAAwB,QAAA,CAAAC,KAAA;MACA;QACA7C,IAAA;UAAA,QAAAiB;QAAA,GAAAmB,IAAA,CAAAU,GAAA;UACA,KAAA9B,IAAA;UACA,KAAA4B,QAAA,CAAAG,OAAA,aAAArC,KAAA;UACA,KAAA4B,KAAA,eAAAtB,IAAA;QACA,GACAuB,KAAA,CAAAC,GAAA;UACA,KAAAxB,IAAA;UACA,KAAAsB,KAAA,eAAAtB,IAAA;QACA;MACA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}