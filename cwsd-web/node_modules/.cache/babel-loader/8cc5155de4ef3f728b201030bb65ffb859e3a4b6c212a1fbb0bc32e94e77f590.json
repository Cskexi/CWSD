{"ast":null,"code":"import { getByToken } from \"@/api/modules/user\";\nimport { applyAddOrUpdate } from \"@/api/modules/apply\";\nimport { getStore } from \"@/utils/storage\";\nexport default {\n  data() {\n    return {\n      user: {\n        id: \"\"\n      },\n      date: \"\",\n      apply: {\n        start: \"\",\n        end: \"\",\n        type: 0,\n        reason: \"\",\n        userId: \"\"\n      },\n      options: [{\n        value: 0,\n        label: \"事假\"\n      }, {\n        value: 1,\n        label: '病假'\n      }, {\n        value: 2,\n        label: '年假'\n      }, {\n        value: 3,\n        label: '其他'\n      }]\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    loadUserData() {\n      let token = getStore(\"token\");\n      if (token) {\n        getByToken({\n          token: token\n        }).then(result => {\n          this.user = result.data;\n          this.apply.userId = this.user.id;\n        }).catch(err => {\n          console.log(\"error:\" + err);\n        });\n      } else {\n        console.log(\"token为空\");\n      }\n    },\n    submitApply() {\n      this.apply.start = this.date[0];\n      this.apply.end = this.date[1];\n      applyAddOrUpdate({\n        ...this.apply\n      }).then(result => {\n        this.$message('提交成功');\n      }).catch(err => {\n        this.$message(\"error:\" + err);\n      });\n    }\n  }\n};","map":{"version":3,"names":["getByToken","applyAddOrUpdate","getStore","data","user","id","date","apply","start","end","type","reason","userId","options","value","label","mounted","loadUserData","methods","token","then","result","catch","err","console","log","submitApply","$message"],"sources":["src/views/attendance/apply.vue"],"sourcesContent":["<template>\r\n    <div class=\"store-management\">\r\n      <h1>请假申请</h1>\r\n      <p>请假类型</p>\r\n      <el-select v-model=\"apply.type\" placeholder=\"请选择\">\r\n      <el-option\r\n        v-for=\"item in options\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\">\r\n      </el-option>\r\n    </el-select>\r\n      <p>请假日期</p>\r\n      <div class=\"block\">\r\n    <el-date-picker\r\n      v-model=\"date\"\r\n      type=\"daterange\"\r\n      range-separator=\"至\"\r\n      start-placeholder=\"开始日期\"\r\n      end-placeholder=\"结束日期\"\r\n      value-format=\"yyyy-MM-dd\">\r\n    </el-date-picker>\r\n  </div>\r\n      <p>请假原因</p>\r\n      <el-input\r\n    type=\"textarea\"\r\n    :rows=\"8\"\r\n    v-model=\"apply.reason\">\r\n  </el-input>\r\n  <el-button type=\"primary\" @click=\"submitApply\">提交</el-button>\r\n    </div>\r\n  </template>\r\n    \r\n  <script>\r\n    import { getByToken } from \"@/api/modules/user\"\r\n    import { applyAddOrUpdate } from \"@/api/modules/apply\"\r\n  import { getStore } from \"@/utils/storage\"\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        user:{\r\n            id:\"\",\r\n        },\r\n        date:\"\",\r\n        apply:{\r\n            start:\"\",\r\n            end:\"\",\r\n            type:0,\r\n            reason:\"\",\r\n            userId:\"\",\r\n        },\r\n        options: [{\r\n            value: 0,\r\n            label: \"事假\"\r\n          }, {\r\n            value: 1,\r\n            label: '病假'\r\n          }, {\r\n            value: 2,\r\n            label: '年假'\r\n          },\r\n          {\r\n            value: 3,\r\n            label: '其他'\r\n          }],\r\n      }\r\n    },\r\n    mounted() {\r\n      this.loadUserData()\r\n\r\n    },\r\n    methods: {\r\n      loadUserData(){\r\n              let token = getStore(\"token\")\r\n              if(token){\r\n                  getByToken({token:token}).then(result=>{\r\n                  this.user=result.data;\r\n                  this.apply.userId=this.user.id;\r\n                  }).catch(err=>{\r\n                      console.log(\"error:\"+err)\r\n                  })\r\n              }\r\n              else{\r\n                  console.log(\"token为空\")\r\n              }\r\n          },\r\n          submitApply(){\r\n            this.apply.start=this.date[0];\r\n            this.apply.end=this.date[1];\r\n            applyAddOrUpdate({...this.apply}).then(result=>{\r\n                this.$message('提交成功')\r\n                  }).catch(err=>{\r\n                    this.$message(\"error:\"+err)\r\n                  })\r\n          }\r\n    },\r\n  }\r\n  \r\n  </script>\r\n    \r\n  \r\n  <style scoped>\r\n  </style>"],"mappings":"AAkCA,SAAAA,UAAA;AACA,SAAAC,gBAAA;AACA,SAAAC,QAAA;AAEA;EACAC,KAAA;IACA;MACAC,IAAA;QACAC,EAAA;MACA;MACAC,IAAA;MACAC,KAAA;QACAC,KAAA;QACAC,GAAA;QACAC,IAAA;QACAC,MAAA;QACAC,MAAA;MACA;MACAC,OAAA;QACAC,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA,GACA;QACAD,KAAA;QACAC,KAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EAEA;EACAC,OAAA;IACAD,aAAA;MACA,IAAAE,KAAA,GAAAjB,QAAA;MACA,IAAAiB,KAAA;QACAnB,UAAA;UAAAmB,KAAA,EAAAA;QAAA,GAAAC,IAAA,CAAAC,MAAA;UACA,KAAAjB,IAAA,GAAAiB,MAAA,CAAAlB,IAAA;UACA,KAAAI,KAAA,CAAAK,MAAA,QAAAR,IAAA,CAAAC,EAAA;QACA,GAAAiB,KAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,YAAAF,GAAA;QACA;MACA,OACA;QACAC,OAAA,CAAAC,GAAA;MACA;IACA;IACAC,YAAA;MACA,KAAAnB,KAAA,CAAAC,KAAA,QAAAF,IAAA;MACA,KAAAC,KAAA,CAAAE,GAAA,QAAAH,IAAA;MACAL,gBAAA;QAAA,QAAAM;MAAA,GAAAa,IAAA,CAAAC,MAAA;QACA,KAAAM,QAAA;MACA,GAAAL,KAAA,CAAAC,GAAA;QACA,KAAAI,QAAA,YAAAJ,GAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}