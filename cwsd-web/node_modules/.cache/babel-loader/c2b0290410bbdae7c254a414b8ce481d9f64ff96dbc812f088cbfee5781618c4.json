{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { dictypePageByUsername, dictypePage, dictypeDeleteByIds } from \"@/api/modules/dictype\";\nimport addOrEdit from \"./module/addOrEdit\";\nimport Dic from \"./module/dic.vue\";\nimport { del } from \"vue\";\nexport default {\n  name: '',\n  components: {\n    addOrEdit,\n    Dic\n  },\n  data() {\n    return {\n      selectionIds: [],\n      visible: false,\n      visible_mgn: false,\n      obj: {},\n      title: \"新增\",\n      total: 10,\n      searchForm: {\n        pageNum: 1,\n        pageSize: 10,\n        username: \"\",\n        name: ''\n      },\n      tableData: [],\n      dictypeId: \"\"\n    };\n  },\n  mounted() {\n    this.loadTableData();\n  },\n  methods: {\n    dicMgn(id) {\n      this.visible_mgn = true;\n      this.dictypeId = id;\n    },\n    delOne(id) {\n      this.del(id);\n    },\n    delAll() {\n      if (this.selectionIds.length <= 0) {\n        this.$message.warning(\"先选择记录\");\n        return;\n      }\n      this.del(this.selectionIds.join(\",\"));\n    },\n    del(ids) {\n      this.$confirm('确定删除该记录？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        dictypeDeleteByIds({\n          ids: ids\n        }).then(result => {\n          this.$message('删除成功');\n          this.loadTableData();\n        }).catch(err => {\n          this.$message.error(err);\n        });\n      }).catch(() => {\n        console.log(\"cancle\");\n      });\n    },\n    add() {\n      //打开对话框\n      //执行操作\n      this.visible = true;\n      this.obj = {};\n    },\n    edit(row) {\n      this.obj = row;\n      this.title = \"编辑\";\n      this.visible = true;\n    },\n    loadTableData() {\n      dictypePageByUsername({\n        ...this.searchForm\n      }).then(result => {\n        console.log(result);\n        this.total = result.data.total;\n        this.tableData = result.data.records;\n        //this.total = result.data.total\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    search() {\n      this.loadTableData();\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val;\n      this.loadTableData();\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.searchForm.pageNum = val;\n      this.loadTableData();\n      console.log(`当前页: ${val}`);\n    },\n    closeFather(val) {\n      this.visible = false;\n      if (val) {\n        this.loadTableData();\n      }\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.selectionIds = [];\n      val.forEach(item => {\n        // console.log(item.id)\n        this.selectionIds.push(item.id);\n      });\n      console.log(this.selectionIds.join(\",\"));\n    },\n    closeMgn(val) {\n      this.visible_mgn = false;\n      if (val) {\n        this.loadTableData();\n      }\n    }\n  }\n};","map":{"version":3,"names":["dictypePageByUsername","dictypePage","dictypeDeleteByIds","addOrEdit","Dic","del","name","components","data","selectionIds","visible","visible_mgn","obj","title","total","searchForm","pageNum","pageSize","username","tableData","dictypeId","mounted","loadTableData","methods","dicMgn","id","delOne","delAll","length","$message","warning","join","ids","$confirm","confirmButtonText","cancelButtonText","type","then","result","catch","err","error","console","log","add","edit","row","records","search","handleSizeChange","val","handleCurrentChange","closeFather","handleSelectionChange","forEach","item","push","closeMgn"],"sources":["src/views/dictype/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>This is an dictype page</h1>\r\n    <el-form ref=\"searchForm\" :model=\"searchForm\" :inline=\"true\" class=\"formItem\" label-width=\"80px\">\r\n      <el-col :xl=\"6\" :md=\"8\" :sm=\"24\">\r\n        <el-form-item label=\"类型名称\" prop=\"name\" style=\"vertical-align: middle;\">\r\n          <el-input placeholder=\"字典类型名称\" v-model=\"searchForm.name\" clearable> </el-input>\r\n        </el-form-item>\r\n      </el-col>\r\n\r\n      <el-col :xl=\"6 || 24\" :md=\"8 || 24\" :sm=\"24\">\r\n        <el-form-item>\r\n          <div :style=\"{ float: 'right', overflow: 'hidden' } || {}\">\r\n            <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"search\">搜索</el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-form>\r\n\r\n\r\n    <!-- <el-button type=\"primary\" @click=\"add\">新增</el-button>\r\n    <el-button type=\"primary\" @click=\"delAll\">批量删除</el-button> -->\r\n\r\n\r\n    <el-table :data=\"tableData\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\">\r\n      <!-- <el-table-column type=\"selection\" width=\"55\">\r\n      </el-table-column> -->\r\n      <el-table-column label=\"字典类型名称\" width=\"180\" prop=\"name\">\r\n      </el-table-column>\r\n      <el-table-column label=\"字典类型值\" width=\"180\" prop=\"value\">\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"dicMgn(scope.row.id)\">字典管理</el-button>\r\n\r\n          <el-button size=\"mini\" @click=\"edit(scope.row)\">编辑</el-button>\r\n          <!-- <el-button size=\"mini\" type=\"danger\" @click=\"delOne(scope.row.id)\">删除</el-button> -->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"block\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"searchForm.pageNum\" :page-sizes=\"[2, 5, 10, 20]\" :page-size=\"searchForm.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <addOrEdit v-if=\"visible\" :defaultFormDate=\"obj\" :title=\"title\" :visible=\"visible\" @close=\"closeFather\"></addOrEdit>\r\n    <Dic v-if=\"visible_mgn\" :visible=\"visible_mgn\" :dictypeId=\"dictypeId\" @close=\"closeMgn\"></Dic>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { dictypePageByUsername, dictypePage, dictypeDeleteByIds } from \"@/api/modules/dictype\"\r\nimport addOrEdit from \"./module/addOrEdit\"\r\nimport Dic from \"./module/dic.vue\"\r\nimport { del } from \"vue\"\r\nexport default {\r\n  name: '',\r\n  components: { addOrEdit, Dic },\r\n  data() {\r\n    return {\r\n      selectionIds: [],\r\n      visible: false,\r\n      visible_mgn: false,\r\n      obj: {},\r\n      title: \"新增\",\r\n      total: 10,\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n\r\n        username: \"\",\r\n        name: ''\r\n      },\r\n      tableData: [],\r\n      dictypeId: \"\",\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadTableData()\r\n  },\r\n  methods: {\r\n    dicMgn(id) {\r\n      this.visible_mgn = true\r\n      this.dictypeId = id\r\n    },\r\n    delOne(id) {\r\n      this.del(id)\r\n    },\r\n    delAll() {\r\n      if (this.selectionIds.length <= 0) {\r\n\r\n        this.$message.warning(\"先选择记录\")\r\n        return\r\n      }\r\n      this.del(this.selectionIds.join(\",\"))\r\n    },\r\n    del(ids) {\r\n      this.$confirm('确定删除该记录？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        dictypeDeleteByIds({ ids: ids }).then(result => {\r\n          this.$message('删除成功')\r\n          this.loadTableData()\r\n        }).catch(err => {\r\n          this.$message.error(err)\r\n        })\r\n      }).catch(() => {\r\n        console.log(\"cancle\")\r\n      });\r\n    },\r\n    add() {\r\n      //打开对话框\r\n      //执行操作\r\n      this.visible = true;\r\n      this.obj = {}\r\n    },\r\n    edit(row) {\r\n      this.obj = row\r\n      this.title = \"编辑\"\r\n      this.visible = true;\r\n    },\r\n    loadTableData() {\r\n      dictypePageByUsername({\r\n        ...this.searchForm\r\n      }).then(result => {\r\n        console.log(result)\r\n        this.total = result.data.total;\r\n        this.tableData = result.data.records;\r\n        //this.total = result.data.total\r\n      }).catch(err => {\r\n        console.log(\"error:\" + err)\r\n      })\r\n    },\r\n    search() {\r\n      this.loadTableData()\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.loadTableData()\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.searchForm.pageNum = val;\r\n      this.loadTableData()\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    closeFather(val) {\r\n      this.visible = false\r\n      if (val) {\r\n        this.loadTableData()\r\n      }\r\n    },\r\n    handleSelectionChange(val) {\r\n      console.log(val)\r\n      this.selectionIds = [];\r\n      val.forEach(item => {\r\n        // console.log(item.id)\r\n        this.selectionIds.push(item.id)\r\n      })\r\n      console.log(this.selectionIds.join(\",\"))\r\n    },\r\n    closeMgn(val) {\r\n      this.visible_mgn = false\r\n      if (val) {\r\n        this.loadTableData()\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>"],"mappings":";AAyDA,SAAAA,qBAAA,EAAAC,WAAA,EAAAC,kBAAA;AACA,OAAAC,SAAA;AACA,OAAAC,GAAA;AACA,SAAAC,GAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAJ,SAAA;IAAAC;EAAA;EACAI,KAAA;IACA;MACAC,YAAA;MACAC,OAAA;MACAC,WAAA;MACAC,GAAA;MACAC,KAAA;MACAC,KAAA;MACAC,UAAA;QACAC,OAAA;QACAC,QAAA;QAEAC,QAAA;QACAZ,IAAA;MACA;MACAa,SAAA;MACAC,SAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,aAAA;EACA;EACAC,OAAA;IACAC,OAAAC,EAAA;MACA,KAAAd,WAAA;MACA,KAAAS,SAAA,GAAAK,EAAA;IACA;IACAC,OAAAD,EAAA;MACA,KAAApB,GAAA,CAAAoB,EAAA;IACA;IACAE,OAAA;MACA,SAAAlB,YAAA,CAAAmB,MAAA;QAEA,KAAAC,QAAA,CAAAC,OAAA;QACA;MACA;MACA,KAAAzB,GAAA,MAAAI,YAAA,CAAAsB,IAAA;IACA;IACA1B,IAAA2B,GAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAC,IAAA;QACAnC,kBAAA;UAAA8B,GAAA,EAAAA;QAAA,GAAAK,IAAA,CAAAC,MAAA;UACA,KAAAT,QAAA;UACA,KAAAP,aAAA;QACA,GAAAiB,KAAA,CAAAC,GAAA;UACA,KAAAX,QAAA,CAAAY,KAAA,CAAAD,GAAA;QACA;MACA,GAAAD,KAAA;QACAG,OAAA,CAAAC,GAAA;MACA;IACA;IACAC,IAAA;MACA;MACA;MACA,KAAAlC,OAAA;MACA,KAAAE,GAAA;IACA;IACAiC,KAAAC,GAAA;MACA,KAAAlC,GAAA,GAAAkC,GAAA;MACA,KAAAjC,KAAA;MACA,KAAAH,OAAA;IACA;IACAY,cAAA;MACAtB,qBAAA;QACA,QAAAe;MACA,GAAAsB,IAAA,CAAAC,MAAA;QACAI,OAAA,CAAAC,GAAA,CAAAL,MAAA;QACA,KAAAxB,KAAA,GAAAwB,MAAA,CAAA9B,IAAA,CAAAM,KAAA;QACA,KAAAK,SAAA,GAAAmB,MAAA,CAAA9B,IAAA,CAAAuC,OAAA;QACA;MACA,GAAAR,KAAA,CAAAC,GAAA;QACAE,OAAA,CAAAC,GAAA,YAAAH,GAAA;MACA;IACA;IACAQ,OAAA;MACA,KAAA1B,aAAA;IACA;IAEA2B,iBAAAC,GAAA;MACA,KAAAnC,UAAA,CAAAE,QAAA,GAAAiC,GAAA;MACA,KAAA5B,aAAA;MACAoB,OAAA,CAAAC,GAAA,OAAAO,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAAnC,UAAA,CAAAC,OAAA,GAAAkC,GAAA;MACA,KAAA5B,aAAA;MACAoB,OAAA,CAAAC,GAAA,SAAAO,GAAA;IACA;IACAE,YAAAF,GAAA;MACA,KAAAxC,OAAA;MACA,IAAAwC,GAAA;QACA,KAAA5B,aAAA;MACA;IACA;IACA+B,sBAAAH,GAAA;MACAR,OAAA,CAAAC,GAAA,CAAAO,GAAA;MACA,KAAAzC,YAAA;MACAyC,GAAA,CAAAI,OAAA,CAAAC,IAAA;QACA;QACA,KAAA9C,YAAA,CAAA+C,IAAA,CAAAD,IAAA,CAAA9B,EAAA;MACA;MACAiB,OAAA,CAAAC,GAAA,MAAAlC,YAAA,CAAAsB,IAAA;IACA;IACA0B,SAAAP,GAAA;MACA,KAAAvC,WAAA;MACA,IAAAuC,GAAA;QACA,KAAA5B,aAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}