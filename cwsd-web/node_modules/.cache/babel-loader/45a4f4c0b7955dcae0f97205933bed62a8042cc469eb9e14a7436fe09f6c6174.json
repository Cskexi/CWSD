{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { applyMyPage } from \"@/api/modules/apply\";\nimport { getByToken } from \"@/api/modules/user\";\nimport { getStore } from \"@/utils/storage\";\nimport addOrEdit from \"./AddOrEdit\";\nexport default {\n  components: {\n    addOrEdit\n  },\n  data() {\n    return {\n      visible: false,\n      obj: {},\n      title: \"修改\",\n      total: 0,\n      searchForm: {\n        pageNum: 1,\n        pageSize: 10,\n        userId: \"\",\n        name: \"\",\n        type: 0,\n        state: 0\n      },\n      myApply: []\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    edit() {\n      this.obj = this.user;\n      this.title = \"审核\";\n      this.visible = true;\n    },\n    setText(lst) {\n      lst.forEach(item => {\n        switch (item.type) {\n          case 0:\n            item.typeName = \"病假\";\n            break;\n          case 1:\n            item.typeName = \"事假\";\n            break;\n          case 2:\n            item.typeName = \"年假\";\n            break;\n          case 3:\n            item.typeName = \"其他\";\n            break;\n          default:\n            console.error(\"Unhandled type:\", item.type);\n        }\n        switch (item.state) {\n          case 0:\n            item.stateName = \"待审核\";\n            break;\n          case 1:\n            item.stateName = \"审核通过\";\n            break;\n          case 2:\n            item.stateName = \"审核不通过\";\n            break;\n          default:\n            console.error(\"Unhandled state:\", item.state);\n        }\n      });\n      return lst;\n    },\n    loadApplyData() {\n      applyMyPage({\n        ...this.searchForm\n      }).then(result => {\n        this.myApply = result.data.records;\n        this.myApply = this.setText(this.myApply);\n        //this.UserData = result.data.records;\n        //this.UserData = this.setText(result.data.records);\n        //this.total = result.data.total;\n        //console.log(result.data.records)\n        //  console.log(this.UserData)\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    loadUserData() {\n      let token = getStore(\"token\");\n      if (token) {\n        getByToken({\n          token: token\n        }).then(result => {\n          this.searchForm.userId = result.data.id;\n          console.log(this.searchForm.userId);\n          this.loadApplyData();\n        }).catch(err => {\n          console.log(\"error:\" + err);\n        });\n      } else {\n        console.log(\"token为空\");\n      }\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val;\n      this.loadUserData();\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.searchForm.pageNum = val;\n      this.loadUserData();\n      console.log(`当前页: ${val}`);\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.selectionIds = [];\n      val.forEach(item => {\n        // console.log(item.id)\n        this.selectionIds.push(item.id);\n      });\n      console.log(this.selectionIds.join(\",\"));\n    }\n  }\n};","map":{"version":3,"names":["applyMyPage","getByToken","getStore","addOrEdit","components","data","visible","obj","title","total","searchForm","pageNum","pageSize","userId","name","type","state","myApply","mounted","loadUserData","methods","edit","user","setText","lst","forEach","item","typeName","console","error","stateName","loadApplyData","then","result","records","catch","err","log","token","id","handleSizeChange","val","handleCurrentChange","handleSelectionChange","selectionIds","push","join"],"sources":["src/views/attendance/vet/index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <el-form ref=\"searchForm\" :model=\"searchForm\" :inline=\"true\" class=\"formItem\" label-width=\"80px\">\r\n          <el-col :xl=\"6\" :md=\"8\" :sm=\"24\">\r\n            <el-input placeholder=\"名称\" v-model=\"searchForm.name\" clearable> </el-input>\r\n          </el-col>\r\n  \r\n          <el-col :xl=\"6 || 24\" :md=\"8 || 24\" :sm=\"24\">\r\n            <el-form-item>\r\n              <div :style=\"{ float: 'right', overflow: 'hidden' } || {}\">\r\n                <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"search\">搜索</el-button>\r\n              </div>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :xl=\"6 || 24\" :md=\"8 || 24\" :sm=\"24\">\r\n            <el-form-item>\r\n                <el-select v-model=\"searchForm.type\" placeholder=\"请选择\">\r\n      <el-option\r\n        v-for=\"item in options\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\">\r\n      </el-option>\r\n    </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :xl=\"6 || 24\" :md=\"8 || 24\" :sm=\"24\">\r\n            <el-form-item>\r\n                <el-select v-model=\"searchForm.type\" placeholder=\"请选择\">\r\n      <el-option\r\n        v-for=\"item in options\"\r\n        :key=\"item.value\"\r\n        :label=\"item.label\"\r\n        :value=\"item.value\">\r\n      </el-option>\r\n    </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-form>\r\n\r\n\r\n      \r\n    <el-table :data=\"myApply\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\">\r\n        <el-table-column label=\"申请人\" prop=\"userId\"></el-table-column>\r\n      <el-table-column label=\"起始时间\" prop=\"start\"></el-table-column>\r\n      <el-table-column label=\"结束时间\" prop=\"end\"></el-table-column>\r\n      <el-table-column label=\"请假类型\" prop=\"typeName\"></el-table-column>\r\n      <el-table-column label=\"请假原因\" prop=\"reason\"></el-table-column>\r\n      <el-table-column label=\"审核状态\" prop=\"stateName\"></el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\" edit\">审核</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pagination-container\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"searchForm.pageNum\" :page-sizes=\"[10, 20, 50]\" :page-size=\"searchForm.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n    <addOrEdit v-if=\"visible\" :defaultFormDate=\"obj\" :title=\"title\" :visible=\"visible\" @close=\"closeFather\"></addOrEdit>\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n  import { applyMyPage } from \"@/api/modules/apply\"\r\n  import { getByToken } from \"@/api/modules/user\"\r\n  import { getStore } from \"@/utils/storage\"\r\n  import addOrEdit from \"./AddOrEdit\"\r\nexport default {\r\n  components: { addOrEdit },\r\n    data() {\r\n      return {\r\n\r\n        visible: false,\r\n      obj: {},\r\n      title: \"修改\",\r\n\r\n        total: 0,\r\n    searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        userId: \"\",\r\n        name:\"\",\r\n        type:0,\r\n        state:0,\r\n      },\r\n      myApply:[],\r\n      }\r\n    },\r\n    mounted() {\r\n        this.loadUserData()\r\n    },\r\n\r\n    methods:{\r\n      edit() {\r\n      this.obj = this.user;\r\n      this.title = \"审核\"\r\n      this.visible = true;\r\n    },\r\n     setText(lst) {\r\n      lst.forEach(item => {\r\n        switch (item.type) {\r\n          case 0:\r\n            item.typeName = \"病假\"\r\n            break\r\n          case 1:\r\n            item.typeName = \"事假\"\r\n            break\r\n          case 2:\r\n            item.typeName = \"年假\"\r\n            break\r\n            case 3:\r\n            item.typeName = \"其他\"\r\n            break\r\n          default:\r\n            console.error(\"Unhandled type:\", item.type);\r\n        }\r\n        switch (item.state) {\r\n          case 0:\r\n            item.stateName = \"待审核\"\r\n            break\r\n          case 1:\r\n            item.stateName = \"审核通过\"\r\n            break\r\n          case 2:\r\n            item.stateName = \"审核不通过\"\r\n            break\r\n          default:\r\n            console.error(\"Unhandled state:\", item.state);\r\n        }\r\n      })\r\n      return lst\r\n    },\r\n\r\n    loadApplyData() {\r\n        applyMyPage({ ...this.searchForm })\r\n        .then(result => {\r\n            this.myApply = result.data.records;\r\n            this.myApply =this.setText(this.myApply);\r\n          //this.UserData = result.data.records;\r\n          //this.UserData = this.setText(result.data.records);\r\n          //this.total = result.data.total;\r\n          //console.log(result.data.records)\r\n       //  console.log(this.UserData)\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n    },\r\n\r\n\r\n    loadUserData() {\r\n      let token = getStore(\"token\")\r\n      if (token) {\r\n        getByToken({ token: token }).then(result => {\r\n            this.searchForm.userId= result.data.id\r\n            console.log( this.searchForm.userId)\r\n            this.loadApplyData()\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n      }\r\n      else {\r\n        console.log(\"token为空\")\r\n      }\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.loadUserData()\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.searchForm.pageNum = val;\r\n      this.loadUserData()\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    handleSelectionChange(val) {\r\n      console.log(val)\r\n      this.selectionIds = [];\r\n      val.forEach(item => {\r\n        // console.log(item.id)\r\n        this.selectionIds.push(item.id)\r\n      })\r\n      console.log(this.selectionIds.join(\",\"))\r\n    },\r\n    }\r\n}\r\n</script>"],"mappings":";AAqEA,SAAAA,WAAA;AACA,SAAAC,UAAA;AACA,SAAAC,QAAA;AACA,OAAAC,SAAA;AACA;EACAC,UAAA;IAAAD;EAAA;EACAE,KAAA;IACA;MAEAC,OAAA;MACAC,GAAA;MACAC,KAAA;MAEAC,KAAA;MACAC,UAAA;QACAC,OAAA;QACAC,QAAA;QACAC,MAAA;QACAC,IAAA;QACAC,IAAA;QACAC,KAAA;MACA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EAEAC,OAAA;IACAC,KAAA;MACA,KAAAd,GAAA,QAAAe,IAAA;MACA,KAAAd,KAAA;MACA,KAAAF,OAAA;IACA;IACAiB,QAAAC,GAAA;MACAA,GAAA,CAAAC,OAAA,CAAAC,IAAA;QACA,QAAAA,IAAA,CAAAX,IAAA;UACA;YACAW,IAAA,CAAAC,QAAA;YACA;UACA;YACAD,IAAA,CAAAC,QAAA;YACA;UACA;YACAD,IAAA,CAAAC,QAAA;YACA;UACA;YACAD,IAAA,CAAAC,QAAA;YACA;UACA;YACAC,OAAA,CAAAC,KAAA,oBAAAH,IAAA,CAAAX,IAAA;QACA;QACA,QAAAW,IAAA,CAAAV,KAAA;UACA;YACAU,IAAA,CAAAI,SAAA;YACA;UACA;YACAJ,IAAA,CAAAI,SAAA;YACA;UACA;YACAJ,IAAA,CAAAI,SAAA;YACA;UACA;YACAF,OAAA,CAAAC,KAAA,qBAAAH,IAAA,CAAAV,KAAA;QACA;MACA;MACA,OAAAQ,GAAA;IACA;IAEAO,cAAA;MACA/B,WAAA;QAAA,QAAAU;MAAA,GACAsB,IAAA,CAAAC,MAAA;QACA,KAAAhB,OAAA,GAAAgB,MAAA,CAAA5B,IAAA,CAAA6B,OAAA;QACA,KAAAjB,OAAA,QAAAM,OAAA,MAAAN,OAAA;QACA;QACA;QACA;QACA;QACA;MACA,GAAAkB,KAAA,CAAAC,GAAA;QACAR,OAAA,CAAAS,GAAA,YAAAD,GAAA;MACA;IACA;IAGAjB,aAAA;MACA,IAAAmB,KAAA,GAAApC,QAAA;MACA,IAAAoC,KAAA;QACArC,UAAA;UAAAqC,KAAA,EAAAA;QAAA,GAAAN,IAAA,CAAAC,MAAA;UACA,KAAAvB,UAAA,CAAAG,MAAA,GAAAoB,MAAA,CAAA5B,IAAA,CAAAkC,EAAA;UACAX,OAAA,CAAAS,GAAA,MAAA3B,UAAA,CAAAG,MAAA;UACA,KAAAkB,aAAA;QACA,GAAAI,KAAA,CAAAC,GAAA;UACAR,OAAA,CAAAS,GAAA,YAAAD,GAAA;QACA;MACA,OACA;QACAR,OAAA,CAAAS,GAAA;MACA;IACA;IAEAG,iBAAAC,GAAA;MACA,KAAA/B,UAAA,CAAAE,QAAA,GAAA6B,GAAA;MACA,KAAAtB,YAAA;MACAS,OAAA,CAAAS,GAAA,OAAAI,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAA/B,UAAA,CAAAC,OAAA,GAAA8B,GAAA;MACA,KAAAtB,YAAA;MACAS,OAAA,CAAAS,GAAA,SAAAI,GAAA;IACA;IACAE,sBAAAF,GAAA;MACAb,OAAA,CAAAS,GAAA,CAAAI,GAAA;MACA,KAAAG,YAAA;MACAH,GAAA,CAAAhB,OAAA,CAAAC,IAAA;QACA;QACA,KAAAkB,YAAA,CAAAC,IAAA,CAAAnB,IAAA,CAAAa,EAAA;MACA;MACAX,OAAA,CAAAS,GAAA,MAAAO,YAAA,CAAAE,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}