{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { applyMyPage } from \"@/api/modules/apply\";\nimport { getByToken } from \"@/api/modules/user\";\nimport { getStore } from \"@/utils/storage\";\nexport default {\n  data() {\n    return {\n      total: 0,\n      searchForm: {\n        pageNum: 1,\n        pageSize: 10,\n        userId: \"\"\n      },\n      myApply: []\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    setText(lst) {\n      lst.forEach(item => {\n        switch (item.type) {\n          case 0:\n            item.typeName = \"病假\";\n            break;\n          case 1:\n            item.typeName = \"事假\";\n            break;\n          case 2:\n            item.typeName = \"年假\";\n            break;\n          case 3:\n            item.typeName = \"其他\";\n            break;\n          default:\n            console.error(\"Unhandled type:\", item.type);\n        }\n        switch (item.state) {\n          case 0:\n            item.stateName = \"待审核\";\n            break;\n          case 1:\n            item.stateName = \"审核通过\";\n            break;\n          case 2:\n            item.stateName = \"审核不通过\";\n            break;\n          default:\n            console.error(\"Unhandled state:\", item.state);\n        }\n      });\n      return lst;\n    },\n    loadApplyData() {\n      applyMyPage({\n        ...this.searchForm\n      }).then(result => {\n        this.myApply = result.data.records;\n        this.myApply = this.setText(this.myApply);\n        //this.UserData = result.data.records;\n        //this.UserData = this.setText(result.data.records);\n        //this.total = result.data.total;\n        //console.log(result.data.records)\n        //  console.log(this.UserData)\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    loadUserData() {\n      let token = getStore(\"token\");\n      if (token) {\n        getByToken({\n          token: token\n        }).then(result => {\n          this.searchForm.userId = result.data.id;\n          console.log(this.searchForm.userId);\n          this.loadApplyData();\n        }).catch(err => {\n          console.log(\"error:\" + err);\n        });\n      } else {\n        console.log(\"token为空\");\n      }\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val;\n      this.loadUserData();\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.searchForm.pageNum = val;\n      this.loadUserData();\n      console.log(`当前页: ${val}`);\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.selectionIds = [];\n      val.forEach(item => {\n        // console.log(item.id)\n        this.selectionIds.push(item.id);\n      });\n      console.log(this.selectionIds.join(\",\"));\n    }\n  }\n};","map":{"version":3,"names":["applyMyPage","getByToken","getStore","data","total","searchForm","pageNum","pageSize","userId","myApply","mounted","loadUserData","methods","setText","lst","forEach","item","type","typeName","console","error","state","stateName","loadApplyData","then","result","records","catch","err","log","token","id","handleSizeChange","val","handleCurrentChange","handleSelectionChange","selectionIds","push","join"],"sources":["src/views/attendance/myAttendance.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n\r\n    <el-table :data=\"myApply\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column label=\"起始时间\" prop=\"start\"></el-table-column>\r\n      <el-table-column label=\"结束时间\" prop=\"end\"></el-table-column>\r\n      <el-table-column label=\"请假类型\" prop=\"typeName\"></el-table-column>\r\n      <el-table-column label=\"请假原因\" prop=\"reason\"></el-table-column>\r\n      <el-table-column label=\"审核状态\" prop=\"stateName\"></el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pagination-container\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"searchForm.pageNum\" :page-sizes=\"[10, 20, 50]\" :page-size=\"searchForm.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n  import { applyMyPage } from \"@/api/modules/apply\"\r\n  import { getByToken } from \"@/api/modules/user\"\r\n  import { getStore } from \"@/utils/storage\"\r\nexport default {\r\n    data() {\r\n      return {\r\n        total: 0,\r\n    searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        userId: \"\",\r\n      },\r\n      myApply:[],\r\n      }\r\n    },\r\n    mounted() {\r\n        this.loadUserData()\r\n\r\n    },\r\n\r\n    methods:{\r\n\r\n     setText(lst) {\r\n      lst.forEach(item => {\r\n        switch (item.type) {\r\n          case 0:\r\n            item.typeName = \"病假\"\r\n            break\r\n          case 1:\r\n            item.typeName = \"事假\"\r\n            break\r\n          case 2:\r\n            item.typeName = \"年假\"\r\n            break\r\n            case 3:\r\n            item.typeName = \"其他\"\r\n            break\r\n          default:\r\n            console.error(\"Unhandled type:\", item.type);\r\n        }\r\n        switch (item.state) {\r\n          case 0:\r\n            item.stateName = \"待审核\"\r\n            break\r\n          case 1:\r\n            item.stateName = \"审核通过\"\r\n            break\r\n          case 2:\r\n            item.stateName = \"审核不通过\"\r\n            break\r\n          default:\r\n            console.error(\"Unhandled state:\", item.state);\r\n        }\r\n      })\r\n      return lst\r\n    },\r\n\r\n    loadApplyData() {\r\n        applyMyPage({ ...this.searchForm })\r\n        .then(result => {\r\n            this.myApply = result.data.records;\r\n            this.myApply =this.setText(this.myApply);\r\n          //this.UserData = result.data.records;\r\n          //this.UserData = this.setText(result.data.records);\r\n          //this.total = result.data.total;\r\n          //console.log(result.data.records)\r\n       //  console.log(this.UserData)\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n    },\r\n\r\n\r\n    loadUserData() {\r\n      let token = getStore(\"token\")\r\n      if (token) {\r\n        getByToken({ token: token }).then(result => {\r\n            this.searchForm.userId= result.data.id\r\n            console.log( this.searchForm.userId)\r\n            this.loadApplyData()\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n      }\r\n      else {\r\n        console.log(\"token为空\")\r\n      }\r\n    },\r\n\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.loadUserData()\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.searchForm.pageNum = val;\r\n      this.loadUserData()\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    handleSelectionChange(val) {\r\n      console.log(val)\r\n      this.selectionIds = [];\r\n      val.forEach(item => {\r\n        // console.log(item.id)\r\n        this.selectionIds.push(item.id)\r\n      })\r\n      console.log(this.selectionIds.join(\",\"))\r\n    },\r\n    }\r\n}\r\n</script>"],"mappings":";AAsBA,SAAAA,WAAA;AACA,SAAAC,UAAA;AACA,SAAAC,QAAA;AACA;EACAC,KAAA;IACA;MACAC,KAAA;MACAC,UAAA;QACAC,OAAA;QACAC,QAAA;QACAC,MAAA;MACA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EAEA;EAEAC,OAAA;IAEAC,QAAAC,GAAA;MACAA,GAAA,CAAAC,OAAA,CAAAC,IAAA;QACA,QAAAA,IAAA,CAAAC,IAAA;UACA;YACAD,IAAA,CAAAE,QAAA;YACA;UACA;YACAF,IAAA,CAAAE,QAAA;YACA;UACA;YACAF,IAAA,CAAAE,QAAA;YACA;UACA;YACAF,IAAA,CAAAE,QAAA;YACA;UACA;YACAC,OAAA,CAAAC,KAAA,oBAAAJ,IAAA,CAAAC,IAAA;QACA;QACA,QAAAD,IAAA,CAAAK,KAAA;UACA;YACAL,IAAA,CAAAM,SAAA;YACA;UACA;YACAN,IAAA,CAAAM,SAAA;YACA;UACA;YACAN,IAAA,CAAAM,SAAA;YACA;UACA;YACAH,OAAA,CAAAC,KAAA,qBAAAJ,IAAA,CAAAK,KAAA;QACA;MACA;MACA,OAAAP,GAAA;IACA;IAEAS,cAAA;MACAvB,WAAA;QAAA,QAAAK;MAAA,GACAmB,IAAA,CAAAC,MAAA;QACA,KAAAhB,OAAA,GAAAgB,MAAA,CAAAtB,IAAA,CAAAuB,OAAA;QACA,KAAAjB,OAAA,QAAAI,OAAA,MAAAJ,OAAA;QACA;QACA;QACA;QACA;QACA;MACA,GAAAkB,KAAA,CAAAC,GAAA;QACAT,OAAA,CAAAU,GAAA,YAAAD,GAAA;MACA;IACA;IAGAjB,aAAA;MACA,IAAAmB,KAAA,GAAA5B,QAAA;MACA,IAAA4B,KAAA;QACA7B,UAAA;UAAA6B,KAAA,EAAAA;QAAA,GAAAN,IAAA,CAAAC,MAAA;UACA,KAAApB,UAAA,CAAAG,MAAA,GAAAiB,MAAA,CAAAtB,IAAA,CAAA4B,EAAA;UACAZ,OAAA,CAAAU,GAAA,MAAAxB,UAAA,CAAAG,MAAA;UACA,KAAAe,aAAA;QACA,GAAAI,KAAA,CAAAC,GAAA;UACAT,OAAA,CAAAU,GAAA,YAAAD,GAAA;QACA;MACA,OACA;QACAT,OAAA,CAAAU,GAAA;MACA;IACA;IAEAG,iBAAAC,GAAA;MACA,KAAA5B,UAAA,CAAAE,QAAA,GAAA0B,GAAA;MACA,KAAAtB,YAAA;MACAQ,OAAA,CAAAU,GAAA,OAAAI,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAA5B,UAAA,CAAAC,OAAA,GAAA2B,GAAA;MACA,KAAAtB,YAAA;MACAQ,OAAA,CAAAU,GAAA,SAAAI,GAAA;IACA;IACAE,sBAAAF,GAAA;MACAd,OAAA,CAAAU,GAAA,CAAAI,GAAA;MACA,KAAAG,YAAA;MACAH,GAAA,CAAAlB,OAAA,CAAAC,IAAA;QACA;QACA,KAAAoB,YAAA,CAAAC,IAAA,CAAArB,IAAA,CAAAe,EAAA;MACA;MACAZ,OAAA,CAAAU,GAAA,MAAAO,YAAA,CAAAE,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}