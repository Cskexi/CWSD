{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Cookies from \"js-cookie\";\nimport { login, getByToken } from \"@/api/modules/user\";\nimport { setStore } from '@/utils/storage';\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      logining: false,\n      loginForm: {\n        account: '',\n        password: ''\n      },\n      fieldRules: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      },\n      checked: true\n    };\n  },\n  methods: {\n    login() {\n      login({\n        ...this.loginForm\n      }).then(result => {\n        let token = result.data;\n        setStore(\"token\", token);\n        setStore('user', this.loginForm.account);\n\n        //this.loadUserData();\n        console.log(\"token:\" + result.data);\n        console.log(\"user:\" + this.loginForm.account);\n        localStorage.setItem(\"user\", JSON.stringify(this.loginForm.account));\n        this.$message.success(\"成功登录\");\n        this.$router.push('/'); // 登录成功，跳转到主页\n      }).catch(err => {\n        console.log(\"error:\" + err);\n        this.$message.error(err);\n      });\n      //  let userInfo = {account:this.loginForm.account, password:this.loginForm.password}\n      // // this.$api.login(JSON.stringify(userInfo)).then((res) => {\n      // //     Cookies.set('token', res.data.token) // 放置token到Cookie\n      // //     sessionStorage.setItem('user', userInfo.account) // 保存用户到本地会话\n\n      // setStore('token', userInfo.token)\n      // this.$router.push('/')  // 登录成功，跳转到主页\n      //   }).catch(function(res) {\n      //     alert(res);\n      //   });\n    },\n    toRegister() {\n      this.$router.push('/register'); // 登录成功，跳转到主页\n    }\n  }\n};","map":{"version":3,"names":["Cookies","login","getByToken","setStore","name","data","logining","loginForm","account","password","fieldRules","required","message","trigger","checked","methods","then","result","token","console","log","localStorage","setItem","JSON","stringify","$message","success","$router","push","catch","err","error","toRegister"],"sources":["src/views/login/index.vue"],"sourcesContent":["<template>\r\n  <el-form :model=\"loginForm\" :rules=\"fieldRules\" ref=\"loginForm\" label-position=\"left\" label-width=\"0px\"\r\n    class=\"demo-ruleForm login-container\">\r\n    <h3 class=\"title\">系统登录</h3>\r\n    <el-form-item prop=\"account\">\r\n      账号<el-input type=\"text\" v-model=\"loginForm.account\" auto-complete=\"off\" placeholder=\"账号\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item prop=\"password\">\r\n      密码<el-input type=\"password\" v-model=\"loginForm.password\" auto-complete=\"off\" placeholder=\"密码\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item style=\"width:100%;\">\r\n      <el-button type=\"primary\" style=\"\" @click.native.prevent=\"login\" :loading=\"logining\">登 录</el-button>\r\n      <!-- <el-button type=\"primary\" style=\"width:48%;\" @click=\"toRegister()\">注 册</el-button> -->\r\n    </el-form-item>\r\n  </el-form>\r\n</template>\r\n\r\n<script>\r\nimport Cookies from \"js-cookie\"\r\nimport { login, getByToken } from \"@/api/modules/user\";\r\nimport { setStore } from '@/utils/storage'\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      logining: false,\r\n      loginForm: {\r\n        account: '',\r\n        password: ''\r\n      },\r\n      fieldRules: {\r\n        account: [\r\n          { required: true, message: '请输入账号', trigger: 'blur' },\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入密码', trigger: 'blur' },\r\n        ]\r\n      },\r\n      checked: true\r\n    };\r\n  },\r\n  methods: {\r\n    login() {\r\n      login({\r\n        ...this.loginForm\r\n      }).then(result => {\r\n        let token = result.data;\r\n        setStore(\"token\", token)\r\n        setStore('user', this.loginForm.account)\r\n\r\n        //this.loadUserData();\r\n        console.log(\"token:\" + result.data)\r\n        console.log(\"user:\" + this.loginForm.account)\r\n        localStorage.setItem(\"user\", JSON.stringify(this.loginForm.account))\r\n        this.$message.success(\"成功登录\")\r\n        this.$router.push('/')  // 登录成功，跳转到主页\r\n      }).catch(err => {\r\n        console.log(\"error:\" + err)\r\n        this.$message.error(err)\r\n      })\r\n      //  let userInfo = {account:this.loginForm.account, password:this.loginForm.password}\r\n      // // this.$api.login(JSON.stringify(userInfo)).then((res) => {\r\n      // //     Cookies.set('token', res.data.token) // 放置token到Cookie\r\n      // //     sessionStorage.setItem('user', userInfo.account) // 保存用户到本地会话\r\n\r\n      // setStore('token', userInfo.token)\r\n      // this.$router.push('/')  // 登录成功，跳转到主页\r\n      //   }).catch(function(res) {\r\n      //     alert(res);\r\n      //   });\r\n    },\r\n    toRegister() {\r\n      this.$router.push('/register')  // 登录成功，跳转到主页\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.login-container {\r\n  -webkit-border-radius: 5px;\r\n  border-radius: 5px;\r\n  -moz-border-radius: 5px;\r\n  background-clip: padding-box;\r\n  margin: 180px auto;\r\n  width: 350px;\r\n  padding: 35px 35px 15px 35px;\r\n  background: #fff;\r\n  border: 1px solid #eaeaea;\r\n  box-shadow: 0 0 25px #cac6c6;\r\n\r\n  .title {\r\n    margin: 0px auto 40px auto;\r\n    text-align: center;\r\n    color: #505458;\r\n  }\r\n\r\n  .remember {\r\n    margin: 0px 0px 35px 0px;\r\n  }\r\n}\r\n</style>"],"mappings":";AAkBA,OAAAA,OAAA;AACA,SAAAC,KAAA,EAAAC,UAAA;AACA,SAAAC,QAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,SAAA;QACAC,OAAA;QACAC,QAAA;MACA;MACAC,UAAA;QACAF,OAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAd,MAAA;MACAA,KAAA;QACA,QAAAM;MACA,GAAAS,IAAA,CAAAC,MAAA;QACA,IAAAC,KAAA,GAAAD,MAAA,CAAAZ,IAAA;QACAF,QAAA,UAAAe,KAAA;QACAf,QAAA,cAAAI,SAAA,CAAAC,OAAA;;QAEA;QACAW,OAAA,CAAAC,GAAA,YAAAH,MAAA,CAAAZ,IAAA;QACAc,OAAA,CAAAC,GAAA,gBAAAb,SAAA,CAAAC,OAAA;QACAa,YAAA,CAAAC,OAAA,SAAAC,IAAA,CAAAC,SAAA,MAAAjB,SAAA,CAAAC,OAAA;QACA,KAAAiB,QAAA,CAAAC,OAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACAX,OAAA,CAAAC,GAAA,YAAAU,GAAA;QACA,KAAAL,QAAA,CAAAM,KAAA,CAAAD,GAAA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;MACA;MACA;IACA;IACAE,WAAA;MACA,KAAAL,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}