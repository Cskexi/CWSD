{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getStore, setStore } from \"@/utils/storage\";\nimport { getByToken, update } from \"@/api/modules/user\";\nimport { removeStore } from '@/utils/storage';\nexport default {\n  data() {\n    return {\n      // user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\n      user: {}\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    logOut() {\n      removeStore('user');\n      this.$router.push('/login'); // 登录成功，跳转到主页\n    },\n    loadUserData() {\n      let token = getStore(\"token\");\n      if (token) {\n        console.log(token);\n        getByToken({\n          token: token\n        }).then(result => {\n          this.user = result.data;\n        }).catch(err => {\n          console.log(\"error:\" + err);\n        });\n      } else {\n        console.log(\"token为空\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["getStore","setStore","getByToken","update","removeStore","data","user","mounted","loadUserData","methods","logOut","$router","push","token","console","log","then","result","catch","err"],"sources":["src/layout/components/Sidebar/index.vue"],"sourcesContent":["<template>\r\n  <el-menu :default-openeds=\"['1', '2']\">\r\n    <el-menu-item index=\"1\">\r\n      <router-link to=\"/home\">首页</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"1\">\r\n      <router-link to=\"/dashboard\">传感器设备</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"1\">\r\n      <router-link to=\"/message\">信息管理</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"2\" v-if=\"user.type == 0\">\r\n      <router-link to=\"/permission\">用户管理</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"1\">\r\n      <router-link to=\"/monitor\">现场监控</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"1\" v-if=\"user.type != 1\">\r\n      <router-link to=\"/dictype\">字典管理</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"1\">\r\n      <router-link to=\"/userInfo\">个人信息管理</router-link>\r\n    </el-menu-item>\r\n    <el-menu-item index=\"1\">\r\n      <router-link to=\"/help\">操作指南</router-link>\r\n    </el-menu-item>\r\n    <!-- <el-submenu index=\"1\">\r\n        <template slot=\"title\">考勤管理</template>\r\n        <el-menu-item-group>\r\n          <el-menu-item index=\"1-1\"> <router-link to=\"/attendance\">出勤人员统计</router-link></el-menu-item>\r\n          <el-menu-item index=\"1-1\"><router-link to=\"/attendanceApply\">请假申请</router-link></el-menu-item>\r\n          <el-menu-item index=\"1-2\"><router-link to=\"/attendanceVet\">请假单审核</router-link></el-menu-item>\r\n          <el-menu-item index=\"1-2\"><router-link to=\"/myAttendance\">我的申请</router-link></el-menu-item>\r\n        </el-menu-item-group>\r\n      </el-submenu>\r\n      <el-submenu index=\"2\">\r\n        <template slot=\"title\">项目任务管理</template>\r\n        <el-menu-item-group>\r\n          <el-menu-item index=\"2-1\">项目管理</el-menu-item>\r\n          <el-menu-item index=\"2-2\">任务管理</el-menu-item>\r\n        </el-menu-item-group>\r\n      </el-submenu> -->\r\n  </el-menu>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getStore, setStore } from \"@/utils/storage\"\r\nimport { getByToken, update } from \"@/api/modules/user\"\r\nimport { removeStore } from '@/utils/storage'\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      // user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\r\n      user: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    this.loadUserData()\r\n  },\r\n  methods: {\r\n    logOut() {\r\n      removeStore('user')\r\n      this.$router.push('/login')  // 登录成功，跳转到主页\r\n    },\r\n    loadUserData() {\r\n      let token = getStore(\"token\")\r\n      if (token) {\r\n        console.log(token)\r\n        getByToken({ token: token }).then(result => {\r\n          this.user = result.data\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n      }\r\n      else {\r\n        console.log(\"token为空\")\r\n      }\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\na {\r\n  text-decoration: none;\r\n  color: #000;\r\n}\r\n\r\n.router-link-active {\r\n  text-decoration: none;\r\n}\r\n</style>\r\n"],"mappings":";AA+CA,SAAAA,QAAA,EAAAC,QAAA;AACA,SAAAC,UAAA,EAAAC,MAAA;AACA,SAAAC,WAAA;AACA;EAEAC,KAAA;IACA;MACA;MACAC,IAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,OAAA;MACAN,WAAA;MACA,KAAAO,OAAA,CAAAC,IAAA;IACA;IACAJ,aAAA;MACA,IAAAK,KAAA,GAAAb,QAAA;MACA,IAAAa,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;QACAX,UAAA;UAAAW,KAAA,EAAAA;QAAA,GAAAG,IAAA,CAAAC,MAAA;UACA,KAAAX,IAAA,GAAAW,MAAA,CAAAZ,IAAA;QACA,GAAAa,KAAA,CAAAC,GAAA;UACAL,OAAA,CAAAC,GAAA,YAAAI,GAAA;QACA;MACA,OACA;QACAL,OAAA,CAAAC,GAAA;MACA;IACA;EACA;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}