{"ast":null,"code":"import addOrEdit from \"./components/AddOrEdit\";\nimport { userPage, userDeleteByIds, userAddOrUpdate, userAdd } from \"@/api/modules/user\";\nimport { list, save, noticePage } from \"@/api/modules/notice\";\nimport { getStore } from \"@/utils/storage\";\nexport default {\n  components: {\n    addOrEdit\n  },\n  data() {\n    return {\n      num: 1,\n      visible: false,\n      total: 10,\n      UserData: [],\n      selectionIds: [],\n      obj: {},\n      options: [{\n        value: 2,\n        label: '施工经理'\n      }, {\n        value: 1,\n        label: '施工人员'\n      }, {\n        value: 0,\n        label: '管理员'\n      }],\n      searchForm: {\n        pageNum: 1,\n        pageSize: 15,\n        state: \"\"\n      },\n      state: \"\"\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    setState(row) {\n      save({\n        id: row.id,\n        state: row.state\n      }).then(result => {\n        this.$message('状态更改成功');\n      }).catch(err => {\n        this.$message.error(err);\n      });\n    },\n    addMonitor() {\n      this.title = \"添加新通知\";\n      this.visible = true;\n      this.obj = {};\n    },\n    closeFather(val) {\n      this.visible = false;\n      if (val) {\n        this.loadUserData();\n      }\n    },\n    lookOne(a) {\n      this.searchForm.state = a;\n      this.loadUserData();\n    },\n    loadUserData() {\n      noticePage({\n        ...this.searchForm\n      }).then(result => {\n        this.UserData = result.data.records;\n        this.total = result.data.total;\n        console.log(this.UserData);\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val;\n      this.loadUserData();\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.searchForm.pageNum = val;\n      this.loadUserData();\n      console.log(`当前页: ${val}`);\n    }\n  }\n};","map":{"version":3,"names":["addOrEdit","userPage","userDeleteByIds","userAddOrUpdate","userAdd","list","save","noticePage","getStore","components","data","num","visible","total","UserData","selectionIds","obj","options","value","label","searchForm","pageNum","pageSize","state","mounted","loadUserData","methods","setState","row","id","then","result","$message","catch","err","error","addMonitor","title","closeFather","val","lookOne","a","records","console","log","handleSizeChange","handleCurrentChange"],"sources":["src/views/message/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-row style=\"margin-bottom: 20px;\">\r\n      <el-col :span=\"3\">\r\n        <el-button type=\"primary\" @click=\"addMonitor\">新增</el-button>\r\n\r\n      </el-col>\r\n      <el-col :span=\"3\" style=\"float: right;\">\r\n        <el-button type=\"primary\" @click=\"lookOne(0)\">查看待处理消息</el-button>\r\n      </el-col>\r\n      <el-col :span=\"3\" style=\"float: right;\">\r\n        <el-button type=\"primary\" @click=\"lookOne()\">查看所有消息</el-button>\r\n      </el-col>\r\n    </el-row>\r\n\r\n\r\n    <el-table :data=\"UserData\" style=\"width: 100%;\">\r\n      <el-table-column label=\"时间\" prop=\"time\" width=\"200\"></el-table-column>\r\n      <el-table-column label=\"通知说明\" prop=\"reason\"></el-table-column>\r\n      <el-table-column label=\"是否处理\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch @change=\"setState(scope.row)\" v-model=\"scope.row.state\" active-color=\"#13ce66\"\r\n            inactive-color=\"#ff4949\" :active-value=\"1\" :inactive-value=\"0\" style=\"margin-left: 10px\"></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pagination-container\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"searchForm.pageNum\" :page-sizes=\"[10, 15, 30]\" :page-size=\"searchForm.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n    <addOrEdit v-if=\"visible\" :defaultFormDate=\"obj\" :title=\"title\" :visible=\"visible\" @close=\"closeFather\"></addOrEdit>\r\n  </div>\r\n</template>\r\n  \r\n<script>\r\nimport addOrEdit from \"./components/AddOrEdit\"\r\nimport { userPage, userDeleteByIds, userAddOrUpdate, userAdd } from \"@/api/modules/user\"\r\nimport { list, save, noticePage } from \"@/api/modules/notice\"\r\nimport { getStore } from \"@/utils/storage\"\r\n\r\nexport default {\r\n  components: {\r\n    addOrEdit\r\n  },\r\n  data() {\r\n    return {\r\n      num: 1,\r\n      visible: false,\r\n      total: 10,\r\n      UserData: [],\r\n      selectionIds: [],\r\n      obj: {},\r\n      options: [{\r\n        value: 2,\r\n        label: '施工经理'\r\n      }, {\r\n        value: 1,\r\n        label: '施工人员'\r\n      }, {\r\n        value: 0,\r\n        label: '管理员'\r\n      },],\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 15,\r\n        state: \"\",\r\n      },\r\n      state: \"\",\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadUserData()\r\n  },\r\n  methods: {\r\n    setState(row) {\r\n      save({\r\n        id: row.id,\r\n        state: row.state\r\n      }).then(result => {\r\n        this.$message('状态更改成功')\r\n      }).catch(err => {\r\n        this.$message.error(err)\r\n      })\r\n    },\r\n\r\n    addMonitor() {\r\n      this.title = \"添加新通知\"\r\n      this.visible = true;\r\n      this.obj = {};\r\n    },\r\n    closeFather(val) {\r\n      this.visible = false\r\n      if (val) {\r\n        this.loadUserData();\r\n      }\r\n    },\r\n\r\n    lookOne(a) {\r\n      this.searchForm.state = a;\r\n      this.loadUserData()\r\n    },\r\n\r\n    loadUserData() {\r\n      noticePage({ ...this.searchForm }).then(result => {\r\n        this.UserData = result.data.records\r\n        this.total = result.data.total;\r\n        console.log(this.UserData)\r\n      }).catch(err => {\r\n        console.log(\"error:\" + err)\r\n      })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.loadUserData()\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.searchForm.pageNum = val;\r\n      this.loadUserData()\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n  },\r\n}\r\n</script>\r\n  \r\n  \r\n<style scoped>\r\n.page-title {\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.formItem {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* Style for the delete button */\r\n.el-button--danger {\r\n  background-color: #f56c6c;\r\n  border-color: #f56c6c;\r\n}\r\n\r\n/* Style for the pagination container */\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n</style>"],"mappings":"AAsCA,OAAAA,SAAA;AACA,SAAAC,QAAA,EAAAC,eAAA,EAAAC,eAAA,EAAAC,OAAA;AACA,SAAAC,IAAA,EAAAC,IAAA,EAAAC,UAAA;AACA,SAAAC,QAAA;AAEA;EACAC,UAAA;IACAT;EACA;EACAU,KAAA;IACA;MACAC,GAAA;MACAC,OAAA;MACAC,KAAA;MACAC,QAAA;MACAC,YAAA;MACAC,GAAA;MACAC,OAAA;QACAC,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;QACAD,KAAA;QACAC,KAAA;MACA;MACAC,UAAA;QACAC,OAAA;QACAC,QAAA;QACAC,KAAA;MACA;MACAA,KAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,SAAAC,GAAA;MACAtB,IAAA;QACAuB,EAAA,EAAAD,GAAA,CAAAC,EAAA;QACAN,KAAA,EAAAK,GAAA,CAAAL;MACA,GAAAO,IAAA,CAAAC,MAAA;QACA,KAAAC,QAAA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAF,QAAA,CAAAG,KAAA,CAAAD,GAAA;MACA;IACA;IAEAE,WAAA;MACA,KAAAC,KAAA;MACA,KAAAzB,OAAA;MACA,KAAAI,GAAA;IACA;IACAsB,YAAAC,GAAA;MACA,KAAA3B,OAAA;MACA,IAAA2B,GAAA;QACA,KAAAd,YAAA;MACA;IACA;IAEAe,QAAAC,CAAA;MACA,KAAArB,UAAA,CAAAG,KAAA,GAAAkB,CAAA;MACA,KAAAhB,YAAA;IACA;IAEAA,aAAA;MACAlB,UAAA;QAAA,QAAAa;MAAA,GAAAU,IAAA,CAAAC,MAAA;QACA,KAAAjB,QAAA,GAAAiB,MAAA,CAAArB,IAAA,CAAAgC,OAAA;QACA,KAAA7B,KAAA,GAAAkB,MAAA,CAAArB,IAAA,CAAAG,KAAA;QACA8B,OAAA,CAAAC,GAAA,MAAA9B,QAAA;MACA,GAAAmB,KAAA,CAAAC,GAAA;QACAS,OAAA,CAAAC,GAAA,YAAAV,GAAA;MACA;IACA;IACAW,iBAAAN,GAAA;MACA,KAAAnB,UAAA,CAAAE,QAAA,GAAAiB,GAAA;MACA,KAAAd,YAAA;MACAkB,OAAA,CAAAC,GAAA,OAAAL,GAAA;IACA;IACAO,oBAAAP,GAAA;MACA,KAAAnB,UAAA,CAAAC,OAAA,GAAAkB,GAAA;MACA,KAAAd,YAAA;MACAkB,OAAA,CAAAC,GAAA,SAAAL,GAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}