{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { userPage, userDeleteByIds, userAddOrUpdate, userAdd } from \"@/api/modules/user\";\nimport { getStore } from \"@/utils/storage\";\nexport default {\n  data() {\n    return {\n      num: 1,\n      visible: false,\n      total: 10,\n      searchForm: {\n        pageNum: 1,\n        pageSize: 10,\n        name: \"\"\n      },\n      UserData: [],\n      selectionIds: [],\n      options: [{\n        value: 2,\n        label: '监测人员'\n      }, {\n        value: 1,\n        label: '施工人员'\n      }, {\n        value: 0,\n        label: '管理员'\n      }]\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    setType(row) {\n      console.log(row.typeName);\n      console.log(row.id);\n      console.log(1);\n      userAddOrUpdate({\n        id: row.id,\n        type: row.typeName\n      }).then(result => {\n        console.log(result);\n        this.$message('状态更改成功');\n      }).catch(err => {\n        this.$message.error(err);\n      });\n    },\n    setState(row) {\n      userAddOrUpdate({\n        id: row.id,\n        state: row.state\n      }).then(result => {\n        this.$message('状态更改成功');\n      }).catch(err => {\n        this.$message.error(err);\n      });\n    },\n    edit(row) {\n      this.obj = row;\n      this.title = row.username;\n      this.visible = true;\n    },\n    addAll(num) {\n      userAdd({\n        num: num\n      }).then(result => {\n        this.$message('添加成功');\n        this.loadUserData();\n      }).catch(err => {\n        this.$message.error(err);\n      });\n    },\n    delOne(id) {\n      this.del(id);\n    },\n    delAll() {\n      if (this.selectionIds.length <= 0) {\n        this.$message.warning(\"先选择记录\");\n        return;\n      }\n      this.del(this.selectionIds.join(\",\"));\n    },\n    del(ids) {\n      this.$confirm('确定删除该记录？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        userDeleteByIds({\n          ids: ids\n        }).then(result => {\n          this.$message('删除成功');\n          this.loadUserData();\n        }).catch(err => {\n          this.$message.error(err);\n        });\n      }).catch(() => {\n        console.log(\"cancle\");\n      });\n    },\n    search() {\n      this.loadUserData();\n    },\n    setText(state) {\n      let lst = state;\n      lst.forEach(item => {\n        switch (item.type) {\n          case '0':\n            item.typeName = \"管理员\";\n            break;\n          case '1':\n            item.typeName = \"施工人员\";\n            break;\n          case '2':\n            item.typeName = \"施工经理\";\n            break;\n          default:\n            console.error(\"Unhandled type:\", item.type);\n        }\n        switch (item.sex) {\n          case \"0\":\n            item.sexName = \"女\";\n            break;\n          case \"1\":\n            item.sexName = \"男\";\n            break;\n          default:\n            console.error(\"Unhandled type:\", item.type);\n        }\n      });\n      return lst;\n    },\n    loadUserData() {\n      userPage({\n        ...this.searchForm\n      }).then(result => {\n        //this.UserData = result.data.records;\n        this.UserData = this.setText(result.data.records);\n        this.total = result.data.total;\n        //console.log(result.data.records)\n        console.log(this.UserData);\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val;\n      this.loadUserData();\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.searchForm.pageNum = val;\n      this.loadUserData();\n      console.log(`当前页: ${val}`);\n    },\n    handleSelectionChange(val) {\n      console.log(val);\n      this.selectionIds = [];\n      val.forEach(item => {\n        // console.log(item.id)\n        this.selectionIds.push(item.id);\n      });\n      console.log(this.selectionIds.join(\",\"));\n    }\n  }\n};","map":{"version":3,"names":["userPage","userDeleteByIds","userAddOrUpdate","userAdd","getStore","data","num","visible","total","searchForm","pageNum","pageSize","name","UserData","selectionIds","options","value","label","mounted","loadUserData","methods","setType","row","console","log","typeName","id","type","then","result","$message","catch","err","error","setState","state","edit","obj","title","username","addAll","delOne","del","delAll","length","warning","join","ids","$confirm","confirmButtonText","cancelButtonText","search","setText","lst","forEach","item","sex","sexName","records","handleSizeChange","val","handleCurrentChange","handleSelectionChange","push"],"sources":["src/views/permission/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- <h1 class=\"page-title\">用户管理</h1> -->\r\n    <el-form ref=\"searchForm\" :model=\"searchForm\" :inline=\"true\" class=\"formItem\" label-width=\"80px\">\r\n      <el-col :xl=\"6\" :md=\"8\" :sm=\"24\" style=\"margin-bottom: 20px;\">\r\n        <el-input placeholder=\"姓名\" v-model=\"searchForm.name\" clearable> </el-input>\r\n      </el-col>\r\n      <el-col :xl=\"6 || 24\" :md=\"6\" :sm=\"24\" style=\"margin-right: 15px\">\r\n        <el-button icon=\"el-icon-search\" type=\"primary\" style=\"margin-left: 15px;\" @click=\"search\">搜索</el-button>\r\n        <el-button type=\"primary\" @click=\"delAll\">批量删除</el-button>\r\n      </el-col>\r\n      <el-col :xl=\"3 || 24\" :md=\"6\" :sm=\"24\" style=\"float:right\">\r\n        <el-input-number v-model=\"num\" controls-position=\"right\" :min=\"1\" :max=\"100\"></el-input-number>\r\n        <el-button type=\"primary\" @click=\"addAll(num)\" style=\"margin-left: 15px;\">批量添加</el-button>\r\n      </el-col>\r\n      <!-- <el-col :xl=\"4 || 24\" :md=\"4 || 24\" :sm=\"24\">\r\n      \r\n    </el-col> -->\r\n    </el-form>\r\n\r\n    <el-table :data=\"UserData\" style=\"width: 100%;\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\"></el-table-column>\r\n      <el-table-column label=\"用户名\" prop=\"account\"></el-table-column>\r\n      <el-table-column label=\"姓名\" prop=\"name\"></el-table-column>\r\n      <el-table-column label=\"性别\" prop=\"sexName\"></el-table-column>\r\n      <el-table-column label=\"手机号\" prop=\"telephone\"></el-table-column>\r\n      <!-- <el-table-column label=\"是否可用\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch @change=\"setState(scope.row)\" v-model=\"scope.row.state\" active-color=\"#13ce66\"\r\n            inactive-color=\"#ff4949\" :active-value=\"1\" :inactive-value=\"0\" style=\"margin-left: 10px\"></el-switch>\r\n        </template>\r\n      </el-table-column> -->\r\n      <el-table-column label=\"身份\" prop=\"typeName\">\r\n        <template slot-scope=\"scope\">\r\n          <el-select @change=\"setType(scope.row)\" v-model=\"scope.row.typeName\" placeholder=\"scope.row.typeName\"\r\n            style=\"width: 105px;\">\r\n            <el-option v-for=\"item in options\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"\r\n              style=\"width: 96px; height:40px\">\r\n            </el-option>\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"delOne(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pagination-container\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"searchForm.pageNum\" :page-sizes=\"[10, 20, 50]\" :page-size=\"searchForm.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { userPage, userDeleteByIds, userAddOrUpdate, userAdd } from \"@/api/modules/user\"\r\nimport { getStore } from \"@/utils/storage\"\r\nexport default {\r\n  data() {\r\n    return {\r\n      num: 1,\r\n      visible: false,\r\n      total: 10,\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        name: \"\",\r\n      },\r\n      UserData: [],\r\n      selectionIds: [],\r\n\r\n      options: [{\r\n        value: 2,\r\n        label: '监测人员'\r\n      }, {\r\n        value: 1,\r\n        label: '施工人员'\r\n      }, {\r\n        value: 0,\r\n        label: '管理员'\r\n      },],\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadUserData()\r\n  },\r\n  methods: {\r\n\r\n    setType(row) {\r\n      console.log(row.typeName)\r\n      console.log(row.id)\r\n      console.log(1)\r\n      userAddOrUpdate({\r\n        id: row.id,\r\n        type: row.typeName\r\n      }).then(result => {\r\n        console.log(result)\r\n        this.$message('状态更改成功')\r\n      }).catch(err => {\r\n        this.$message.error(err)\r\n      })\r\n    },\r\n\r\n    setState(row) {\r\n      userAddOrUpdate({\r\n        id: row.id,\r\n        state: row.state\r\n      }).then(result => {\r\n        this.$message('状态更改成功')\r\n      }).catch(err => {\r\n        this.$message.error(err)\r\n      })\r\n    },\r\n\r\n    edit(row) {\r\n      this.obj = row\r\n      this.title = row.username\r\n      this.visible = true;\r\n    },\r\n    addAll(num) {\r\n      userAdd({ num: num }).then(result => {\r\n        this.$message('添加成功')\r\n        this.loadUserData()\r\n      }).catch(err => {\r\n        this.$message.error(err)\r\n      })\r\n    },\r\n    delOne(id) {\r\n      this.del(id)\r\n    },\r\n    delAll() {\r\n      if (this.selectionIds.length <= 0) {\r\n        this.$message.warning(\"先选择记录\")\r\n        return\r\n      }\r\n      this.del(this.selectionIds.join(\",\"))\r\n    },\r\n    del(ids) {\r\n      this.$confirm('确定删除该记录？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        userDeleteByIds({ ids: ids }).then(result => {\r\n          this.$message('删除成功')\r\n          this.loadUserData()\r\n        }).catch(err => {\r\n          this.$message.error(err)\r\n        })\r\n      }).catch(() => {\r\n        console.log(\"cancle\")\r\n      });\r\n    },\r\n\r\n    search() {\r\n      this.loadUserData()\r\n    },\r\n\r\n    setText(state) {\r\n      let lst = state\r\n      lst.forEach(item => {\r\n        switch (item.type) {\r\n          case '0':\r\n            item.typeName = \"管理员\"\r\n            break\r\n          case '1':\r\n            item.typeName = \"施工人员\"\r\n            break\r\n          case '2':\r\n            item.typeName = \"施工经理\"\r\n            break\r\n          default:\r\n            console.error(\"Unhandled type:\", item.type);\r\n        }\r\n        switch (item.sex) {\r\n          case \"0\":\r\n            item.sexName = \"女\"\r\n            break\r\n          case \"1\":\r\n            item.sexName = \"男\"\r\n            break\r\n          default:\r\n            console.error(\"Unhandled type:\", item.type);\r\n        }\r\n      })\r\n      return lst\r\n    },\r\n\r\n    loadUserData() {\r\n      userPage({ ...this.searchForm })\r\n        .then(result => {\r\n          //this.UserData = result.data.records;\r\n          this.UserData = this.setText(result.data.records);\r\n          this.total = result.data.total;\r\n          //console.log(result.data.records)\r\n          console.log(this.UserData)\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n    },\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.loadUserData()\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.searchForm.pageNum = val;\r\n      this.loadUserData()\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    handleSelectionChange(val) {\r\n      console.log(val)\r\n      this.selectionIds = [];\r\n      val.forEach(item => {\r\n        // console.log(item.id)\r\n        this.selectionIds.push(item.id)\r\n      })\r\n      console.log(this.selectionIds.join(\",\"))\r\n    },\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.page-title {\r\n  font-size: 24px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.formItem {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n/* Style for the delete button */\r\n.el-button--danger {\r\n  background-color: #f56c6c;\r\n  border-color: #f56c6c;\r\n}\r\n\r\n/* Style for the pagination container */\r\n.pagination-container {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}