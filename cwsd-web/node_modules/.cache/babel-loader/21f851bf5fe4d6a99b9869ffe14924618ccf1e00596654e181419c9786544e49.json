{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { dicPage, dicDeleteByIds } from \"@/api/modules/dic\";\nimport addOrEdit from \"./dicAddOrEdit\";\nexport default {\n  name: 'dic_index',\n  components: {\n    addOrEdit\n  },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    dictypeId: {\n      type: String\n    }\n  },\n  data() {\n    return {\n      selectionIds: [],\n      visible_e: false,\n      obj: {},\n      title: \"新增\",\n      total: 10,\n      tableData: [],\n      searchForm: {\n        pageNum: 1,\n        pageSize: 10,\n        name: '',\n        dictypeId: \"\"\n      }\n    };\n  },\n  mounted() {\n    this.searchForm.dictypeId = this.dictypeId;\n    this.loadTableData();\n  },\n  methods: {\n    search() {\n      this.loadTableData();\n    },\n    dicMgn(dictypeId) {},\n    delOne(id) {\n      this.del(id);\n    },\n    delAll() {\n      if (this.selectionIds.length <= 0) {\n        this.$message.warning(\"先选择记录\");\n        return;\n      }\n      this.del(this.selectionIds.join(\",\"));\n    },\n    del(ids) {\n      this.$confirm('确定删除该记录？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        dicDeleteByIds({\n          ids: ids\n        }).then(result => {\n          this.$message('删除成功');\n          this.loadTableData();\n        }).catch(err => {\n          this.$message.error(err);\n        });\n      }).catch(() => {\n        console.log(\"cancle\");\n      });\n    },\n    add() {\n      // //打开对话框\n      // //执行操作\n      this.visible_e = true;\n      this.obj = {\n        dictypeId: this.dictypeId\n      };\n    },\n    edit(row) {\n      this.obj = row;\n      this.title = \"编辑\";\n      this.visible_e = true;\n    },\n    loadTableData() {\n      dicPage({\n        ...this.searchForm\n      }).then(result => {\n        console.log(result.data);\n        this.total = result.data.total;\n        this.tableData = result.data.records;\n        //this.total = result.data.total\n      }).catch(err => {\n        console.log(\"error:\" + err);\n      });\n    },\n    handleSizeChange(val) {\n      this.searchForm.pageSize = val;\n      this.loadTableData();\n      console.log(`每页 ${val} 条`);\n    },\n    handleCurrentChange(val) {\n      this.searchForm.pageNum = val;\n      this.loadTableData();\n      console.log(`当前页: ${val}`);\n    },\n    close() {\n      this.$emit(\"close\", false);\n    },\n    handleSelectionChange(val) {\n      this.selectionIds = [];\n      val.forEach(item => {\n        // console.log(item.id)\n        this.selectionIds.push(item.id);\n      });\n      console.log(this.selectionIds.join(\",\"));\n    },\n    closeFather(val) {\n      this.visible_e = false;\n      if (val) {\n        this.loadTableData();\n      }\n    }\n  }\n};","map":{"version":3,"names":["dicPage","dicDeleteByIds","addOrEdit","name","components","props","visible","type","Boolean","default","dictypeId","String","data","selectionIds","visible_e","obj","title","total","tableData","searchForm","pageNum","pageSize","mounted","loadTableData","methods","search","dicMgn","delOne","id","del","delAll","length","$message","warning","join","ids","$confirm","confirmButtonText","cancelButtonText","then","result","catch","err","error","console","log","add","edit","row","records","handleSizeChange","val","handleCurrentChange","close","$emit","handleSelectionChange","forEach","item","push","closeFather"],"sources":["src/views/dictype/module/dic.vue"],"sourcesContent":["<template>\r\n  <el-dialog title=\"管理字典\" :visible=\"visible\" :before-close=\"close\">\r\n    <el-form ref=\"searchForm\" :model=\"searchForm\" :inline=\"true\" class=\"formItem\" label-width=\"80px\">\r\n      <el-col :xl=\"6\" :md=\"8\" :sm=\"24\">\r\n        <el-form-item label=\"字典名称\" prop=\"name\" style=\"vertical-align: middle;\">\r\n          <el-input placeholder=\"字典名称\" v-model=\"searchForm.name\" clearable> </el-input>\r\n        </el-form-item>\r\n      </el-col>\r\n\r\n      <el-col :xl=\"6 || 24\" :md=\"8 || 24\" :sm=\"24\">\r\n        <el-form-item>\r\n          <div :style=\"{ float: 'right', overflow: 'hidden' } || {}\">\r\n            <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"search\">搜索</el-button>\r\n          </div>\r\n        </el-form-item>\r\n      </el-col>\r\n    </el-form>\r\n\r\n\r\n    <el-button type=\"primary\" @click=\"add\">新增</el-button>\r\n    <el-button type=\"primary\" @click=\"delAll\">批量删除</el-button>\r\n\r\n\r\n    <el-table :data=\"tableData\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\">\r\n      <el-table-column type=\"selection\" width=\"55\">\r\n      </el-table-column>\r\n      <el-table-column label=\"字典名称\" width=\"180\" prop=\"name\">\r\n      </el-table-column>\r\n      <el-table-column label=\"字典值\" width=\"180\" prop=\"value\">\r\n      </el-table-column>\r\n      <el-table-column label=\"所属字典类型\" width=\"180\" prop=\"etc.dictype.name\">\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n\r\n          <el-button size=\"mini\" @click=\"edit(scope.row)\">编辑</el-button>\r\n          <el-button size=\"mini\" type=\"danger\" @click=\"delOne(scope.row.id)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"block\">\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"searchForm.pageNum\" :page-sizes=\"[2, 5, 10, 20]\" :page-size=\"searchForm.pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n    <addOrEdit v-if=\"visible_e\" :defaultFormDate=\"obj\" :title=\"title\" :visible=\"visible_e\" @close=\"closeFather\">\r\n    </addOrEdit>\r\n  </el-dialog>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { dicPage, dicDeleteByIds } from \"@/api/modules/dic\"\r\nimport addOrEdit from \"./dicAddOrEdit\"\r\nexport default {\r\n  name: 'dic_index',\r\n  components: { addOrEdit },\r\n  props: {\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    dictypeId: {\r\n      type: String\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      selectionIds: [],\r\n      visible_e: false,\r\n      obj: {},\r\n      title: \"新增\",\r\n      total: 10,\r\n\r\n      tableData: [],\r\n      searchForm: {\r\n        pageNum: 1,\r\n        pageSize: 10,\r\n        name: '',\r\n        dictypeId: \"\",\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.searchForm.dictypeId = this.dictypeId\r\n    this.loadTableData()\r\n  },\r\n  methods: {\r\n\r\n    search() {\r\n      this.loadTableData()\r\n    },\r\n\r\n    dicMgn(dictypeId) {\r\n    },\r\n    delOne(id) {\r\n      this.del(id)\r\n    },\r\n    delAll() {\r\n      if (this.selectionIds.length <= 0) {\r\n\r\n        this.$message.warning(\"先选择记录\")\r\n        return\r\n      }\r\n      this.del(this.selectionIds.join(\",\"))\r\n    },\r\n    del(ids) {\r\n      this.$confirm('确定删除该记录？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        dicDeleteByIds({ ids: ids }).then(result => {\r\n          this.$message('删除成功')\r\n          this.loadTableData()\r\n        }).catch(err => {\r\n          this.$message.error(err)\r\n        })\r\n      }).catch(() => {\r\n        console.log(\"cancle\")\r\n      });\r\n    },\r\n    add() {\r\n      // //打开对话框\r\n      // //执行操作\r\n      this.visible_e = true;\r\n      this.obj = { dictypeId: this.dictypeId }\r\n    },\r\n    edit(row) {\r\n      this.obj = row\r\n      this.title = \"编辑\"\r\n      this.visible_e = true;\r\n    },\r\n    loadTableData() {\r\n      dicPage({\r\n        ...this.searchForm\r\n      }).then(result => {\r\n        console.log(result.data)\r\n        this.total = result.data.total;\r\n        this.tableData = result.data.records;\r\n        //this.total = result.data.total\r\n      }).catch(err => {\r\n        console.log(\"error:\" + err)\r\n      })\r\n    },\r\n\r\n\r\n    handleSizeChange(val) {\r\n      this.searchForm.pageSize = val;\r\n      this.loadTableData()\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.searchForm.pageNum = val;\r\n      this.loadTableData()\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    close() {\r\n      this.$emit(\"close\", false)\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.selectionIds = [];\r\n      val.forEach(item => {\r\n        // console.log(item.id)\r\n        this.selectionIds.push(item.id)\r\n      })\r\n      console.log(this.selectionIds.join(\",\"))\r\n\r\n    },\r\n    closeFather(val) {\r\n      this.visible_e = false\r\n      if (val) {\r\n        this.loadTableData()\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>"],"mappings":";AAuDA,SAAAA,OAAA,EAAAC,cAAA;AACA,OAAAC,SAAA;AACA;EACAC,IAAA;EACAC,UAAA;IAAAF;EAAA;EACAG,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,OAAA;IACA;IACAC,SAAA;MACAH,IAAA,EAAAI;IACA;EACA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,SAAA;MACAC,GAAA;MACAC,KAAA;MACAC,KAAA;MAEAC,SAAA;MACAC,UAAA;QACAC,OAAA;QACAC,QAAA;QACAlB,IAAA;QACAO,SAAA;MACA;IACA;EACA;EACAY,QAAA;IACA,KAAAH,UAAA,CAAAT,SAAA,QAAAA,SAAA;IACA,KAAAa,aAAA;EACA;EACAC,OAAA;IAEAC,OAAA;MACA,KAAAF,aAAA;IACA;IAEAG,OAAAhB,SAAA,GACA;IACAiB,OAAAC,EAAA;MACA,KAAAC,GAAA,CAAAD,EAAA;IACA;IACAE,OAAA;MACA,SAAAjB,YAAA,CAAAkB,MAAA;QAEA,KAAAC,QAAA,CAAAC,OAAA;QACA;MACA;MACA,KAAAJ,GAAA,MAAAhB,YAAA,CAAAqB,IAAA;IACA;IACAL,IAAAM,GAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACA/B,IAAA;MACA,GAAAgC,IAAA;QACAtC,cAAA;UAAAkC,GAAA,EAAAA;QAAA,GAAAI,IAAA,CAAAC,MAAA;UACA,KAAAR,QAAA;UACA,KAAAT,aAAA;QACA,GAAAkB,KAAA,CAAAC,GAAA;UACA,KAAAV,QAAA,CAAAW,KAAA,CAAAD,GAAA;QACA;MACA,GAAAD,KAAA;QACAG,OAAA,CAAAC,GAAA;MACA;IACA;IACAC,IAAA;MACA;MACA;MACA,KAAAhC,SAAA;MACA,KAAAC,GAAA;QAAAL,SAAA,OAAAA;MAAA;IACA;IACAqC,KAAAC,GAAA;MACA,KAAAjC,GAAA,GAAAiC,GAAA;MACA,KAAAhC,KAAA;MACA,KAAAF,SAAA;IACA;IACAS,cAAA;MACAvB,OAAA;QACA,QAAAmB;MACA,GAAAoB,IAAA,CAAAC,MAAA;QACAI,OAAA,CAAAC,GAAA,CAAAL,MAAA,CAAA5B,IAAA;QACA,KAAAK,KAAA,GAAAuB,MAAA,CAAA5B,IAAA,CAAAK,KAAA;QACA,KAAAC,SAAA,GAAAsB,MAAA,CAAA5B,IAAA,CAAAqC,OAAA;QACA;MACA,GAAAR,KAAA,CAAAC,GAAA;QACAE,OAAA,CAAAC,GAAA,YAAAH,GAAA;MACA;IACA;IAGAQ,iBAAAC,GAAA;MACA,KAAAhC,UAAA,CAAAE,QAAA,GAAA8B,GAAA;MACA,KAAA5B,aAAA;MACAqB,OAAA,CAAAC,GAAA,OAAAM,GAAA;IACA;IACAC,oBAAAD,GAAA;MACA,KAAAhC,UAAA,CAAAC,OAAA,GAAA+B,GAAA;MACA,KAAA5B,aAAA;MACAqB,OAAA,CAAAC,GAAA,SAAAM,GAAA;IACA;IACAE,MAAA;MACA,KAAAC,KAAA;IACA;IACAC,sBAAAJ,GAAA;MACA,KAAAtC,YAAA;MACAsC,GAAA,CAAAK,OAAA,CAAAC,IAAA;QACA;QACA,KAAA5C,YAAA,CAAA6C,IAAA,CAAAD,IAAA,CAAA7B,EAAA;MACA;MACAgB,OAAA,CAAAC,GAAA,MAAAhC,YAAA,CAAAqB,IAAA;IAEA;IACAyB,YAAAR,GAAA;MACA,KAAArC,SAAA;MACA,IAAAqC,GAAA;QACA,KAAA5B,aAAA;MACA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}