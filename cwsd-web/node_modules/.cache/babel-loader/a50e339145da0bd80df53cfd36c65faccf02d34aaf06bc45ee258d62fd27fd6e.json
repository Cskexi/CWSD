{"ast":null,"code":"import { getByToken, update } from \"@/api/modules/user\";\nimport { getStore } from \"@/utils/storage\";\nimport addOrEdit from \"./AddOrEdit\";\nexport default {\n  components: {\n    addOrEdit\n  },\n  data() {\n    return {\n      visible: false,\n      obj: {},\n      title: \"修改\",\n      user: {\n        id: '',\n        account: '',\n        name: '',\n        telephone: '',\n        sex: '',\n        password: ''\n      }\n    };\n  },\n  mounted() {\n    this.loadUserData();\n  },\n  methods: {\n    edit() {\n      this.obj = this.user;\n      this.title = \"编辑个人信息\";\n      this.visible = true;\n    },\n    closeFather(val) {\n      this.visible = false;\n      if (val) {\n        this.loadUserData();\n      }\n    },\n    loadUserData() {\n      let token = getStore(\"token\");\n      if (token) {\n        console.log(token);\n        getByToken({\n          token: token\n        }).then(result => {\n          this.user = this.setText(result.data);\n          console.log(this.user);\n        }).catch(err => {\n          console.log(\"error:\" + err);\n        });\n      } else {\n        console.log(\"token为空\");\n      }\n    },\n    setText(item) {\n      switch (item.type) {\n        case '0':\n          item.typeName = \"管理员\";\n          break;\n        case '1':\n          item.typeName = \"施工人员\";\n          break;\n        case '2':\n          item.typeName = \"施工经理\";\n          break;\n        default:\n          console.error(\"Unhandled type:\", item.type);\n      }\n      switch (item.sex) {\n        case '0':\n          item.sexName = \"女\";\n          break;\n        case '1':\n          item.sexName = \"男\";\n          break;\n        default:\n          console.error(\"Unhandled sex:\", item.type);\n      }\n      return item;\n    }\n  }\n};","map":{"version":3,"names":["getByToken","update","getStore","addOrEdit","components","data","visible","obj","title","user","id","account","name","telephone","sex","password","mounted","loadUserData","methods","edit","closeFather","val","token","console","log","then","result","setText","catch","err","item","type","typeName","error","sexName"],"sources":["src/views/userInfo/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"store-management\">\r\n    <div class=\"header\">\r\n      <h1>个人信息管理</h1>\r\n    </div>\r\n    <div class=\"info\">\r\n      <p><strong>账号：</strong>{{ user.account }}</p>\r\n      <p><strong>姓名：</strong>{{ user.name }}</p>\r\n      <p><strong>性别：</strong>{{ user.sexName }}</p>\r\n      <p><strong>手机号：</strong>{{ user.telephone }}</p>\r\n      <p><strong>身份：</strong>{{ user.typeName }}</p>\r\n    </div>\r\n    <div class=\"actions\">\r\n      <el-button type=\"primary\" @click=\"edit\">修改</el-button>\r\n    </div>\r\n    <addOrEdit v-if=\"visible\" :defaultFormDate=\"obj\" :title=\"title\" :visible=\"visible\" @close=\"closeFather\"></addOrEdit>\r\n  </div>\r\n</template>\r\n    \r\n<script>\r\nimport { getByToken, update } from \"@/api/modules/user\"\r\nimport { getStore } from \"@/utils/storage\"\r\nimport addOrEdit from \"./AddOrEdit\"\r\nexport default {\r\n  components: { addOrEdit },\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      obj: {},\r\n      title: \"修改\",\r\n      user: {\r\n        id: '',\r\n        account: '',\r\n        name: '',\r\n        telephone: '',\r\n        sex: '',\r\n        password: '',\r\n      },\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadUserData()\r\n  },\r\n  methods: {\r\n    edit() {\r\n      this.obj = this.user;\r\n      this.title = \"编辑个人信息\"\r\n      this.visible = true;\r\n    },\r\n    closeFather(val) {\r\n      this.visible = false\r\n      if (val) {\r\n        this.loadUserData()\r\n      }\r\n    },\r\n\r\n    loadUserData() {\r\n      let token = getStore(\"token\")\r\n      if (token) {\r\n        console.log(token)\r\n        getByToken({ token: token }).then(result => {\r\n          this.user = this.setText(result.data);\r\n          console.log(this.user)\r\n        }).catch(err => {\r\n          console.log(\"error:\" + err)\r\n        })\r\n      }\r\n      else {\r\n        console.log(\"token为空\")\r\n      }\r\n    },\r\n\r\n    setText(item) {\r\n      switch (item.type) {\r\n        case '0':\r\n          item.typeName = \"管理员\"\r\n          break\r\n        case '1':\r\n          item.typeName = \"施工人员\"\r\n          break\r\n        case '2':\r\n          item.typeName = \"施工经理\"\r\n          break\r\n        default:\r\n          console.error(\"Unhandled type:\", item.type);\r\n      }\r\n      switch (item.sex) {\r\n        case '0':\r\n          item.sexName = \"女\"\r\n          break\r\n        case '1':\r\n          item.sexName = \"男\"\r\n          break\r\n        default:\r\n          console.error(\"Unhandled sex:\", item.type);\r\n      }\r\n      return item\r\n    }\r\n\r\n  },\r\n}\r\n\r\n</script>\r\n    \r\n\r\n<style scoped>\r\n.store-management {\r\n  max-width: 600px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  border-radius: 8px;\r\n  font-family: 'Arial', sans-serif;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.header h1 {\r\n  font-size: 24px;\r\n  color: #333;\r\n}\r\n\r\n.info p {\r\n  font-size: 16px;\r\n  color: #555;\r\n  margin: 10px 0;\r\n}\r\n"],"mappings":"AAoBA,SAAAA,UAAA,EAAAC,MAAA;AACA,SAAAC,QAAA;AACA,OAAAC,SAAA;AACA;EACAC,UAAA;IAAAD;EAAA;EACAE,KAAA;IACA;MACAC,OAAA;MACAC,GAAA;MACAC,KAAA;MACAC,IAAA;QACAC,EAAA;QACAC,OAAA;QACAC,IAAA;QACAC,SAAA;QACAC,GAAA;QACAC,QAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAC,KAAA;MACA,KAAAZ,GAAA,QAAAE,IAAA;MACA,KAAAD,KAAA;MACA,KAAAF,OAAA;IACA;IACAc,YAAAC,GAAA;MACA,KAAAf,OAAA;MACA,IAAAe,GAAA;QACA,KAAAJ,YAAA;MACA;IACA;IAEAA,aAAA;MACA,IAAAK,KAAA,GAAApB,QAAA;MACA,IAAAoB,KAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,KAAA;QACAtB,UAAA;UAAAsB,KAAA,EAAAA;QAAA,GAAAG,IAAA,CAAAC,MAAA;UACA,KAAAjB,IAAA,QAAAkB,OAAA,CAAAD,MAAA,CAAArB,IAAA;UACAkB,OAAA,CAAAC,GAAA,MAAAf,IAAA;QACA,GAAAmB,KAAA,CAAAC,GAAA;UACAN,OAAA,CAAAC,GAAA,YAAAK,GAAA;QACA;MACA,OACA;QACAN,OAAA,CAAAC,GAAA;MACA;IACA;IAEAG,QAAAG,IAAA;MACA,QAAAA,IAAA,CAAAC,IAAA;QACA;UACAD,IAAA,CAAAE,QAAA;UACA;QACA;UACAF,IAAA,CAAAE,QAAA;UACA;QACA;UACAF,IAAA,CAAAE,QAAA;UACA;QACA;UACAT,OAAA,CAAAU,KAAA,oBAAAH,IAAA,CAAAC,IAAA;MACA;MACA,QAAAD,IAAA,CAAAhB,GAAA;QACA;UACAgB,IAAA,CAAAI,OAAA;UACA;QACA;UACAJ,IAAA,CAAAI,OAAA;UACA;QACA;UACAX,OAAA,CAAAU,KAAA,mBAAAH,IAAA,CAAAC,IAAA;MACA;MACA,OAAAD,IAAA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}